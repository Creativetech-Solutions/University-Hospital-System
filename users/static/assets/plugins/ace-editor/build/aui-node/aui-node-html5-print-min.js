AUI.add("aui-node-html5-print",function(m){var i=m.config,G=i.doc,k=i.win,D=m.UA,t=D.ie,y=function(){return k.AUI_HTML5_IE===false;};if(!t||t>=9||y()){return;}var S=[],w="aui-printfix",s="aui-printfix-",p=k.location,Q=p.protocol+"//"+p.host,e=YUI.AUI,R=G.documentElement,H=e.HTML5_ELEMENTS,q=H.length,z=H.join("|"),K=new RegExp("<(/?):("+z+")","gi"),u=new RegExp("("+z+")","gi"),c=new RegExp("\\b("+z+")\\b","i"),N=/print|all/,O=new RegExp("(^|[^\\n{}]*?\\s)("+z+").*?{([^}]*)}","gim"),o=new RegExp("<(/*)("+z+")","gi"),L="."+s+"$1",U="all",B=" ",j="",d="{",M="}",a="checkbox",b="checked",f="https",x="IFRAME",n="INPUT",T="OPTION",P="radio",v="selected",l="*",I="url(",J=I+Q,r="<$1$2",h="<$1font";var C=e.html5shiv,F=function(A){return A&&(A+j!==undefined);},g=function(V,A,X){var W=A[X];if(W){V.setAttribute(X,W);}else{V.removeAttribute(X);}};C(G);var E=function(){var W=function(){if(y()){V();}else{E.onAfterPrint();}};var A=function(){if(y()){V();}else{E.onBeforePrint();}};var V=function(){k.detachEvent("onafterprint",W);k.detachEvent("onbeforeprint",A);};var X=function(){k.attachEvent("onafterprint",W);k.attachEvent("onbeforeprint",A);};X();E.destroy=V;E.init=X;};m.mix(E,{onAfterPrint:function(){var A=this;A.restoreHTML();var V=A._getStyleSheet();V.styleSheet.cssText=j;},onBeforePrint:function(){var A=this;var W=A._getStyleSheet();var V=A._getAllCSSText();W.styleSheet.cssText=A.parseCSS(V);A.writeHTML();},parseCSS:function(W){var A=this;var V=j;var X=W.match(O);if(X){V=X.join("\n").replace(u,L);}return V;},restoreHTML:function(){var A=this;var Y=A._getBodyClone();var V=A._getBodyEl();var W=Y.getElementsByTagName(x);var ab=V.getElementsByTagName(x);var aa=ab.length;if(aa==W.length){while(aa--){var X=W[aa];var Z=ab[aa];Z.swapNode(X);}}Y.innerHTML=j;R.removeChild(Y);R.appendChild(V);},writeHTML:function(){var ao=this;var an=-1;var am;var ah=ao._getBodyEl();var ad;var af;var ap;var ac;var ai;var ak=[];while(++an<q){ad=H[an];ap=G.getElementsByTagName(ad);ac=ap.length;am=-1;while(++am<ac){ai=ap[am];af=ai.className;if(af.indexOf(s)==-1){ak[0]=s+ad;ak[1]=af;ai.className=ak.join(B);}}}var A=ao._getDocFrag();var Y=ao._getBodyClone();A.appendChild(ah);R.appendChild(Y);Y.className=ah.className;Y.id=ah.id;var aq=ah.getElementsByTagName(l);var ab=aq.length;if(D.secure){var aa=ah.style;var al;var W;aa.display="none";for(an=0;an<ab;an++){al=aq[an].style;W=al.backgroundImage;if(W&&W.indexOf(I)>-1&&W.indexOf(f)==-1){al.backgroundImage=W.replace(I,J);}}aa.display=j;}var ae=ah.cloneNode(true);var ag=ae.getElementsByTagName(l);if(ab==ag.length){while(ab--){var V=ag[ab];var aj=V.nodeName;if(aj==n||aj==T||aj==x){var X=aq[ab];var at=X.nodeName;if(at==aj){var Z=null;if(aj==T){Z=v;}else{if(aj==n&&(V.type==a||V.type==P)){Z=b;}else{if(aj==x){V.src=j;}}}if(Z!==null){g(V,X,Z);}}}}}var ar=ae.innerHTML;ar=ar.replace(K,r).replace(o,h);Y.innerHTML=ar;ag=Y.getElementsByTagName(x);aq=ah.getElementsByTagName(x);ab=aq.length;if(ab==ag.length){while(ab--){var V=ag[ab];var X=aq[ab];X.swapNode(V);}}},_getAllCSSText:function(){var ab=this;var X=[];var aa=ab._getAllStyleSheets(G.styleSheets,U);var Z;var V;for(var Y=0;styleSheet=aa[Y];Y++){var ac=styleSheet.rules;if(ac&&ac.length){for(var W=0,A=ac.length;W<A;W++){Z=ac[W];if(!Z.href){V=ab._getCSSTextFromRule(Z);X.push(V);}}}}return X.join(B);},_getCSSTextFromRule:function(Z){var A=this;var W=j;var Y=Z.style;var X;var V;if(Y&&(X=Y.cssText)&&(V=Z.selectorText)&&c.test(V)){S.length=0;S.push(V,d,X,M);W=S.join(B);}return W;},_getAllStyleSheets:function(aa,ad,V,X){var ab=this;V=V||1;X=X||[];var Y;if(F(aa)){var A=aa.imports;ad=aa.mediaType||ad;if(N.test(ad)){var W;if(V<=3&&F(A)&&A.length){for(Y=0,W=A.length;Y<W;Y++){ab._getAllStyleSheets(A[Y],ad,V+1,X);}}else{if(aa.length){for(Y=0,W=aa.length;Y<W;Y++){ab._getAllStyleSheets(aa[Y],ad,V,X);}}else{var ac=aa.rules;var Z;if(ac&&ac.length){for(Y=0,W=ac.length;Y<W;Y++){Z=ac[Y].styleSheet;if(Z){ab._getAllStyleSheets(Z,ad,V,X);}}}}}if(!aa.disabled&&aa.rules){X.push(aa);}}}ad=U;return X;},_getBodyEl:function(){var A=this;var V=A._bodyEl;if(!V){V=G.body;A._bodyEl=V;}return V;},_getBodyClone:function(){var A=this;var V=A._bodyClone;if(!V){V=G.createElement("body");A._bodyClone=V;}return V;},_getDocFrag:function(){var A=this;var V=A._docFrag;if(!V){V=G.createDocumentFragment();C(V);A._docFrag=V;}return V;},_getStyleSheet:function(){var A=this;var W=A._styleSheet;if(!W){W=G.createElement("style");var V=G.documentElement.firstChild;V.insertBefore(W,V.firstChild);W.media="print";W.className=w;A._styleSheet=W;}return W;}});m.namespace("HTML5").PrintFix=E;E();},"@VERSION@",{requires:["aui-node-html5"]});