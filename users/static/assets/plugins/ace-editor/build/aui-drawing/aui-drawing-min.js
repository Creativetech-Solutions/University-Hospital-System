AUI.add("aui-drawing-base",function(n){var Q=n.Lang,s=Q.isArray,p=Q.isFunction,O=Q.isNumber,E=Q.isObject,i=Q.isString,q=Q.isUndefined,y=n.config.doc,w=n.ColorUtil,a,u=n.UA,F=Q.emptyFn,m={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://alloy.liferay.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"AlloyUI",translation:"0 0",width:0,x:0,y:0},P={Q:1,T:1},b={circle:1,ellipse:1,image:1,path:1,rect:1,text:1},B={image:1,text:1},r={circle:1,ellipse:1},L=Math,G=L.max,k=L.min,K=L.pow,x="drawing",t=/^([^:]*):?([\d\.]*)/,C=/^url\(['"]?([^\)]+?)['"]?\)$/i,o=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,h=/,?([achlmqrstvxz]),?/gi,f=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,J=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,N=/[, ]+/,j=/\s*\-\s*/,l="",D="fill",M=" progid:DXImageTransform.Microsoft",d=" ",I=String.prototype.toLowerCase,v=String.prototype.toUpperCase;var c=n.Component.create({ATTRS:{height:{value:342},width:{value:512},x:{value:null},y:{value:null}},UI_ATTRS:["x","y"],create:function(S){var R=arguments;var A=R[0];if(s(A)){R=R[0];S=a.getConfig(R);var W=new c(S).render();var X=W.createSet();var U;for(var T=0,V=R.length;T<V;T++){U=R[T]||{};if(b.hasOwnProperty(U.type)){X.push(W[U.type]().attr(U));}}return W;}else{if(E(A)&&!(A.nodeName||A instanceof n.Node)){S=A;}else{S=a.getConfig(R);}}return new c(S).render();},NAME:x,prototype:{CONTENT_TEMPLATE:null,renderUI:function(){var A=this;A.customAttributes={};c.Impl.createCanvas.call(A);},circle:function(R,T,S){var A=this;return c.Impl.createCircle.call(A,R||0,T||0,S||0);},clear:function(){var A=this;return c.Impl.clear.call(A);},createSet:function(R){var A=this;if(arguments.length>1){R=Array.prototype.splice.call(arguments,0,arguments.length);}return new e(R);},ellipse:function(R,U,T,S){var A=this;return c.Impl.createEllipse.call(A,R||0,U||0,T||0,S||0);},image:function(U,R,V,S,T){var A=this;return c.Impl.createImage.call(A,U||"about:blank",R||0,V||0,S||0,T||0);},path:function(R){var A=this;if(i(R)){R=Q.sub.apply(n,arguments);}else{if(!q(R)&&!s(R)){R+=l;}}return c.Impl.createPath.call(A,R);},rect:function(R,V,S,T,U){var A=this;return c.Impl.createRectangle.call(A,R||0,V||0,S||0,T||0,U||0);},remove:function(){var A=this;return c.Impl.remove.call(A);},safari:F,text:function(R,T,S){var A=this;return c.Impl.createText.call(A,R||0,T||0,S||l);},_uiSetX:function(R){var A=this;A.get("boundingBox").setXY([R,A.get("y")]);},_uiSetY:function(R){var A=this;A.get("boundingBox").setXY([A.get("x"),R]);}}});a={getConfig:function(U){var T={};var R=U[0];var A="boundingBox";var W=2;var V=1;var S=-1;if(O(R)){A="x";W=3;V=2;S=1;}T[A]=R;T.height=U[W];T.width=U[V];T.y=U[S];return T;},translate:function(A,S){if(A==null){return{x:this._.tx,y:this._.ty,toString:a.XYToString};}this._.tx+=+A;this._.ty+=+S;switch(this.type){case"circle":case"ellipse":this.attr({cx:+A+this.attrs.cx,cy:+S+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+A+this.attrs.x,y:+S+this.attrs.y});break;case"path":var R=a.pathToRelative(this.attrs.path);R[0][1]+=+A;R[0][2]+=+S;this.attr({path:R});break;}return this;}};c.getColor=function(R){var S=c.getColor.start=c.getColor.start||{h:0,s:1,b:R||0.75};var A=w.hsb2rgb(S.h,S.s,S.b);S.h+=0.075;if(S.h>1){S.h=0;S.s-=0.2;if(S.s<=0){c.getColor.start={h:0,s:1,b:S.b};}}return A.hex;};c.getColor.reset=function(){delete c.start;};a.tear=function(R,A){R==A.top&&(A.top=R.prev);R==A.bottom&&(A.bottom=R.next);R.next&&(R.next.prev=R.prev);R.prev&&(R.prev.next=R.next);};a.toFront=function(R,A){if(A.top===R){return;}a.tear(R,A);R.next=null;R.prev=A.top;A.top.next=R;A.top=R;};a.toBack=function(R,A){if(A.bottom===R){return;}a.tear(R,A);R.next=A.bottom;R.prev=null;A.bottom.prev=R;A.bottom=R;};a.insertAfter=function(S,R,A){a.tear(S,A);R==A.top&&(A.top=S);R.next&&(R.next.prev=S);S.next=R.next;S.prev=R;R.next=S;};a.insertBefore=function(S,R,A){a.tear(S,A);R==A.bottom&&(A.bottom=S);R.prev&&(R.prev.next=S);S.prev=R.prev;R.prev=S;S.next=R;};var g=function(S,R){var A=this;A.createElement.apply(A,arguments);};a.removed=function(A){return function(){throw new Error('AlloyUI: you are calling to method "'+A+'" of removed object');};};a._path2string=function(){return this.join(",").replace(h,"$1");};a.parsePathString=n.cached(function(A){if(!A){return null;}var S={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var R=[];if(s(A)&&s(A[0])){R=pathClone(A);}if(!R.length){String(A).replace(o,function(U,T,X){var W=[];var V=I.call(T);X.replace(f,function(Z,Y){Y&&W.push(+Y);});if(V=="m"&&W.length>2){R.push([T].concat(W.splice(0,2)));V="l";T=T=="m"?"l":"L";}while(W.length>=S[V]){R.push([T].concat(W.splice(0,S[V])));if(!S[V]){break;}}});}R.toString=a._path2string;return R;});a.findDotsAtSegment=function(R,A,ak,ai,W,U,Y,X,ae){var ac=1-ae;var ab=K(ac,3)*R+K(ac,2)*3*ae*ak+ac*3*ae*ae*W+K(ae,3)*Y;var Z=K(ac,3)*A+K(ac,2)*3*ae*ai+ac*3*ae*ae*U+K(ae,3)*X;var ag=R+2*ae*(ak-R)+ae*ae*(W-2*ak+R);var af=A+2*ae*(ai-A)+ae*ae*(U-2*ai+A);var aj=ak+2*ae*(W-ak)+ae*ae*(Y-2*W+ak);var ah=ai+2*ae*(U-ai)+ae*ae*(X-2*U+ai);var ad=(1-ae)*R+ae*ak;var aa=(1-ae)*A+ae*ai;var T=(1-ae)*W+ae*Y;var S=(1-ae)*U+ae*X;var V=(90-L.atan((ag-aj)/(af-ah))*180/L.PI);if(ag>aj||af<ah){V+=180;}return{x:ab,y:Z,m:{x:ag,y:af},n:{x:aj,y:ah},start:{x:ad,y:aa},end:{x:T,y:S},alpha:V};};a.pathDimensions=n.cached(function(ac){if(!ac){return{x:0,y:0,width:0,height:0};}ac=a.path2curve(ac);var aa=0;var Z=0;var T=[];var R=[];var S;for(var V=0,U=ac.length;V<U;V++){S=ac[V];if(S[0]=="M"){aa=S[1];Z=S[2];T.push(aa);R.push(Z);}else{var W=a.curveDim(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6]);T=T.concat(W.min.x,W.max.x);R=R.concat(W.min.y,W.max.y);aa=S[5];Z=S[6];}}var A=k.apply(0,T);
var ab=k.apply(0,R);return{x:A,y:ab,width:G.apply(0,T)-A,height:G.apply(0,R)-ab};});a.pathClone=function(V){var S=[];if(!s(V)||!s(V&&V[0])){V=a.parsePathString(V);}for(var R=0,U=V.length;R<U;R++){S[R]=[];for(var A=0,T=V[R].length;A<T;A++){S[R][A]=V[R][A];}}S.toString=a._path2string;return S;};a._pathToRelative=n.cached(function(T){if(!s(T)||!s(T&&T[0])){T=a.parsePathString(T);}var Z=[];var ac=0;var ab=0;var af=0;var ae=0;var R=0;if(T[0][0]=="M"){ac=T[0][1];ab=T[0][2];af=ac;ae=ab;R++;Z.push(["M",ac,ab]);}for(var X=R,S=T.length;X<S;X++){var A=Z[X]=[];var ad=T[X];if(ad[0]!=I.call(ad[0])){A[0]=I.call(ad[0]);switch(A[0]){case"a":A[1]=ad[1];A[2]=ad[2];A[3]=ad[3];A[4]=ad[4];A[5]=ad[5];A[6]=+(ad[6]-ac).toFixed(3);A[7]=+(ad[7]-ab).toFixed(3);break;case"v":A[1]=+(ad[1]-ab).toFixed(3);break;case"m":af=ad[1];ae=ad[2];default:for(var V=1,aa=ad.length;V<aa;V++){A[V]=+(ad[V]-((V%2)?ac:ab)).toFixed(3);}}}else{A=Z[X]=[];if(ad[0]=="m"){af=ad[1]+ac;ae=ad[2]+ab;}for(var U=0,W=ad.length;U<W;U++){Z[X][U]=ad[U];}}var Y=Z[X].length;switch(Z[X][0]){case"z":ac=af;ab=ae;break;case"h":ac+=+Z[X][Y-1];break;case"v":ab+=+Z[X][Y-1];break;default:ac+=+Z[X][Y-2];ab+=+Z[X][Y-1];}}Z.toString=a._path2string;return Z;});a.pathToRelative=function(A){return a.pathClone(a._pathToRelative(A));};a._pathToAbsolute=n.cached(function(T){if(!s(T)||!s(T&&T[0])){T=a.parsePathString(T);}var Y=[];var ab=0;var aa=0;var ae=0;var ad=0;var R=0;if(T[0][0]=="M"){ab=+T[0][1];aa=+T[0][2];ae=ab;ad=aa;R++;Y[0]=["M",ab,aa];}for(var X=R,S=T.length;X<S;X++){var A=Y[X]=[];var ac=T[X];if(ac[0]!=v.call(ac[0])){A[0]=v.call(ac[0]);switch(A[0]){case"A":A[1]=ac[1];A[2]=ac[2];A[3]=ac[3];A[4]=ac[4];A[5]=ac[5];A[6]=+(ac[6]+ab);A[7]=+(ac[7]+aa);break;case"V":A[1]=+ac[1]+aa;break;case"H":A[1]=+ac[1]+ab;break;case"M":ae=+ac[1]+ab;ad=+ac[2]+aa;default:for(var V=1,Z=ac.length;V<Z;V++){A[V]=+ac[V]+((V%2)?ab:aa);}}}else{for(var U=0,W=ac.length;U<W;U++){Y[X][U]=ac[U];}}switch(A[0]){case"Z":ab=ae;aa=ad;break;case"H":ab=A[1];break;case"V":aa=A[1];break;case"M":ae=Y[X][Y[X].length-2];ad=Y[X][Y[X].length-1];default:ab=Y[X][Y[X].length-2];aa=Y[X][Y[X].length-1];}}Y.toString=a._path2string;return Y;});a.pathToAbsolute=function(A){return a.pathClone(a._pathToAbsolute(A));};a.lineToCubicCurve=function(R,T,A,S){return[R,T,A,S,A,S];};a.quadraticToCubicCurve=function(R,T,W,U,A,S){var V=1/3;var X=2/3;return[V*R+X*W,V*T+X*U,V*A+X*W,V*S+X*U,A,S];};a.arcToCubicCurve=function(ae,aK,ao,am,ag,Z,U,ad,aJ,ah){var T=L.PI;var al=T*120/180;var A=T/180*(+ag||0);var ar=[];var ap;var aG=n.cached(function(aM,aP,aL){var aO=aM*L.cos(aL)-aP*L.sin(aL),aN=aM*L.sin(aL)+aP*L.cos(aL);return{x:aO,y:aN};});if(!ah){ap=aG(ae,aK,-A);ae=ap.x;aK=ap.y;ap=aG(ad,aJ,-A);ad=ap.x;aJ=ap.y;var R=L.cos(T/180*ag);var ab=L.sin(T/180*ag);var au=(ae-ad)/2;var at=(aK-aJ)/2;var aE=(au*au)/(ao*ao)+(at*at)/(am*am);if(aE>1){aE=L.sqrt(aE);ao=aE*ao;am=aE*am;}var S=ao*ao;var ax=am*am;var az=(Z==U?-1:1)*L.sqrt(L.abs((S*ax-S*at*at-ax*au*au)/(S*at*at+ax*au*au)));var aj=az*ao*at/am+(ae+ad)/2;var ai=az*-am*au/ao+(aK+aJ)/2;var Y=L.asin(((aK-ai)/am).toFixed(7));var X=L.asin(((aJ-ai)/am).toFixed(7));Y=ae<aj?T-Y:Y;X=ad<aj?T-X:X;Y<0&&(Y=T*2+Y);X<0&&(X=T*2+X);if(U&&Y>X){Y=Y-T*2;}if(!U&&X>Y){X=X-T*2;}}else{Y=ah[0];X=ah[1];aj=ah[2];ai=ah[3];}var ac=X-Y;if(L.abs(ac)>al){var ak=X;var an=ad;var aa=aJ;X=Y+al*(U&&X>Y?1:-1);ad=aj+ao*L.cos(X);aJ=ai+am*L.sin(X);ar=a.arcToCubicCurve(ad,aJ,ao,am,ag,0,U,an,aa,[X,ak,aj,ai]);}ac=X-Y;var W=L.cos(Y);var aI=L.sin(Y);var V=L.cos(X);var aH=L.sin(X);var av=L.tan(ac/4);var ay=4/3*ao*av;var aw=4/3*am*av;var aF=[ae,aK];var aD=[ae+ay*aI,aK-aw*W];var aC=[ad+ay*aH,aJ-aw*V];var aA=[ad,aJ];aD[0]=2*aF[0]-aD[0];aD[1]=2*aF[1]-aD[1];if(ah){return[aD,aC,aA].concat(ar);}else{ar=[aD,aC,aA].concat(ar).join().split(",");var aq=[];for(var aB=0,af=ar.length;aB<af;aB++){aq[aB]=aB%2?aG(ar[aB-1],ar[aB],A).y:aG(ar[aB],ar[aB+1],A).x;}return aq;}};a.findDotAtSegment=function(R,A,T,S,Y,X,W,V,Z){var U=1-Z;return{x:K(U,3)*R+K(U,2)*3*Z*T+U*3*Z*Z*Y+K(Z,3)*W,y:K(U,3)*A+K(U,2)*3*Z*S+U*3*Z*Z*X+K(Z,3)*V};};a.curveDim=n.cached(function(S,A,U,T,af,ae,ab,Y){var ad=(af-2*U+S)-(ab-2*af+U);var aa=2*(U-S)-2*(af-U);var X=S-U;var W=(-aa+L.sqrt(aa*aa-4*ad*X))/2/ad;var V=(-aa-L.sqrt(aa*aa-4*ad*X))/2/ad;var Z=[A,Y];var ac=[S,ab];var R;L.abs(W)>1000000000000&&(W=0.5);L.abs(V)>1000000000000&&(V=0.5);if(W>0&&W<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,W);ac.push(R.x);Z.push(R.y);}if(V>0&&V<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,V);ac.push(R.x);Z.push(R.y);}ad=(ae-2*T+A)-(Y-2*ae+T);aa=2*(T-A)-2*(ae-T);X=A-T;W=(-aa+L.sqrt(aa*aa-4*ad*X))/2/ad;V=(-aa-L.sqrt(aa*aa-4*ad*X))/2/ad;L.abs(W)>1000000000000&&(W=0.5);L.abs(V)>1000000000000&&(V=0.5);if(W>0&&W<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,W);ac.push(R.x);Z.push(R.y);}if(V>0&&V<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,V);ac.push(R.x);Z.push(R.y);}return{min:{x:k.apply(0,ac),y:k.apply(0,Z)},max:{x:G.apply(0,ac),y:G.apply(0,Z)}};});a._path2curve=n.cached(function(ae,aa){var T=a.pathToAbsolute(ae);var ab=aa&&a.pathToAbsolute(aa);var ac={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var W=function(ag,ah){var af;var ai;if(!ag){return["C",ah.x,ah.y,ah.x,ah.y,ah.x,ah.y];}if(!(ag[0] in P)){ah.qx=ah.qy=null;}switch(ag[0]){case"M":ah.X=ag[1];ah.Y=ag[2];break;case"A":ag=["C"].concat(a.arcToCubicCurve.apply(0,[ah.x,ah.y].concat(ag.slice(1))));break;case"S":af=ah.x+(ah.x-(ah.bx||ah.x));ai=ah.y+(ah.y-(ah.by||ah.y));ag=["C",af,ai].concat(ag.slice(1));break;case"T":ah.qx=ah.x+(ah.x-(ah.qx||ah.x));ah.qy=ah.y+(ah.y-(ah.qy||ah.y));ag=["C"].concat(a.quadraticToCubicCurve(ah.x,ah.y,ah.qx,ah.qy,ag[1],ag[2]));break;case"Q":ah.qx=ag[1];ah.qy=ag[2];ag=["C"].concat(a.quadraticToCubicCurve(ah.x,ah.y,ag[1],ag[2],ag[3],ag[4]));break;case"L":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ag[1],ag[2]));break;case"H":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ag[1],ah.y));break;case"V":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ah.x,ag[1]));break;case"Z":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ah.X,ah.Y));
break;}return ag;};var R=function(af,ag){if(af[ag].length>7){af[ag].shift();var ah=af[ag];while(ah.length){af.splice(ag++,0,["C"].concat(ah.splice(0,6)));}af.splice(ag,1);V=G(T.length,ab&&ab.length||0);}};var S=function(aj,ai,ag,af,ah){if(aj&&ai&&aj[ah][0]=="M"&&ai[ah][0]!="M"){ai.splice(ah,0,["M",af.x,af.y]);ag.bx=0;ag.by=0;ag.x=aj[ah][1];ag.y=aj[ah][2];V=G(T.length,ab&&ab.length||0);}};for(var Y=0,V=G(T.length,ab&&ab.length||0);Y<V;Y++){T[Y]=W(T[Y],ac);R(T,Y);ab&&(ab[Y]=W(ab[Y],A));ab&&R(ab,Y);S(T,ab,ac,A,Y);S(ab,T,A,ac,Y);var X=T[Y];var ad=ab&&ab[Y];var U=X.length;var Z=ab&&ad.length;ac.x=X[U-2];ac.y=X[U-1];ac.bx=parseFloat(X[U-4])||ac.x;ac.by=parseFloat(X[U-3])||ac.y;A.bx=ab&&(parseFloat(ad[Z-4])||A.x);A.by=ab&&(parseFloat(ad[Z-3])||A.y);A.x=ab&&ad[Z-2];A.y=ab&&ad[Z-1];}return ab?[T,ab]:T;});a.path2curve=function(R,A){return a.pathClone(a._path2curve(R,A));};a.parseDots=n.cached(function(Z){var Y=[];for(var V=0,S=Z.length;V<S;V++){var A={};var X=Z[V].match(t);A.color=w.getRGB(X[1]);if(A.color.error){return null;}A.color=A.color.hex;X[2]&&(A.offset=X[2]+"%");Y.push(A);}for(V=1,S=Y.length-1;V<S;V++){if(!Y[V].offset){var R=parseFloat(Y[V-1].offset||0);var T=0;for(var U=V+1;U<S;U++){if(Y[U].offset){T=Y[U].offset;break;}}if(!T){T=100;U=S;}T=parseFloat(T);var W=(T-R)/(U-V+1);for(;V<U;V++){R+=W;Y[V].offset=R+"%";}}}return Y;});a.XYToString=function(){return this.x+d+this.y;};a.getPointAtSegmentLength=n.cached(function(S,A,W,V,ac,ab,aa,Z,T){var Y=0;var U;for(var X=0;X<1.01;X+=0.01){var R=a.findDotAtSegment(S,A,W,V,ac,ab,aa,Z,X);X&&(Y+=K(K(U.x-R.x,2)+K(U.y-R.y,2),0.5));if(Y>=T){return R;}U=R;}});var z={};a.getPointAtSegmentLength=function(U,R,Y,X,ag,af,ae,ac,V){var ab=0;var aa=100;var T=[U,R,Y,X,ag,af,ae,ac].join();var A=z[T];var W;var S;if(!A){A={data:[]};z[T]=A;}if(A.timer){clearTimeout(A.timer);}A.timer=setTimeout(function(){delete z[T];},2000);if(V!=null){var ad=getPointAtSegmentLength(U,R,Y,X,ag,af,ae,ac);aa=~~ad*10;}for(var Z=0;Z<aa+1;Z++){if(A.data[V]>Z){S=A.data[Z*aa];}else{S=a.findDotsAtSegment(U,R,Y,X,ag,af,ae,ac,Z/aa);A.data[Z]=S;}if(Z){ab+=K(K(W.x-S.x,2)+K(W.y-S.y,2),0.5);}if(V!=null&&ab>=V){return S;}if(V==null){return ab;}}};a.getLengthFactory=function(A,R){return function(ad,U,V){ad=a.path2curve(ad);var aa;var Z;var S;var W;var T="";var ac={};var ab;var Y=0;for(var X=0,U=ad.length;X<U;X++){S=ad[X];if(S[0]=="M"){aa=+S[1];Z=+S[2];}else{W=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6]);if(Y+W>U){if(R&&!ac.start){ab=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],U-Y);T+=["C",ab.start.x,ab.start.y,ab.m.x,ab.m.y,ab.x,ab.y];if(V){return T;}ac.start=T;T=["M",ab.x,ab.y+"C",ab.n.x,ab.n.y,ab.end.x,ab.end.y,S[5],S[6]].join();Y+=W;aa=+S[5];Z=+S[6];continue;}if(!A&&!R){ab=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],U-Y);return{x:ab.x,y:ab.y,alpha:ab.alpha};}}Y+=W;aa=+S[5];Z=+S[6];}T+=S;}ac.end=T;ab=A?Y:R?ac:a.findDotsAtSegment(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],1);ab.alpha&&(ab={x:ab.x,y:ab.y,alpha:ab.alpha});return ab;};};a.getTotalLength=a.getLengthFactory(1);a.getPointAtLength=a.getLengthFactory();a.getSubpathsAtLength=a.getLengthFactory(0,1);a.applyAttributes=function(S,A,U){var X;if(U!=null){X={};X[A]=U;}else{if(A!=null&&E(A)){X=A;}}var W=S.paper.customAttributes;for(var R in W){if(W.hasOwnProperty(R)&&X.hasOwnProperty(R)&&p(W[R])){var T=W[R].apply(S,[].concat(X[R]));S.attrs[R]=X[R];for(var V in T){if(T.hasOwnProperty(V)){X[V]=T[V];}}}}return X;};g.prototype={attr:F,blur:F,clone:function(){if(this.removed){return null;}var A=this.attr();delete A.scale;delete A.translation;return this.paper[this.type]().attr(A);},createElement:F,detach:function(S,R){var A=this;n.detach(g._getEventType(S),R,(A.shape||A.node||y));return A;},getRegion:F,getPointAtLength:function(A){if(this.type!="path"){return;}return a.getPointAtLength(this.attrs.path,A);},getSubpath:function(S,R){if(this.type!="path"){return;}if(L.abs(this.getTotalLength()-R)<"1e-6"){return a.getSubpathsAtLength(this.attrs.path,S).end;}var A=a.getSubpathsAtLength(this.attrs.path,R,1);return S?a.getSubpathsAtLength(A,S).end:A;},getTotalLength:function(){if(this.type!="path"){return;}if(this.node.getTotalLength){return this.node.getTotalLength();}return a.getTotalLength(this.attrs.path);},hide:F,hover:function(R,A){return this.on("mouseover",R).on("mouseout",A);},insertAfter:F,insertBefore:F,on:function(U,T,R){var A=this;var S=g._getEventType(U);n.on(S,n.bind(T,R||A),A.shape||A.node||y,g._getEventConfig(S,U));return A;},remove:F,resetScale:function(){if(this.removed){return this;}this._.sx=1;this._.sy=1;this.attrs.scale="1 1";},rotate:F,scale:function(ao,an,ag,ae){if(this.removed){return this;}if(ao==null&&an==null){return{x:this._.sx,y:this._.sy,toString:a.XYToString};}an=an||ao;!+an&&(an=ao);var R;var A;var ax;var aw;var aA=this.attrs;if(ao!=0){var aB=this.getRegion();var U=aB.x+aB.width/2;var T=aB.y+aB.height/2;var au=L.abs(ao/this._.sx);var at=L.abs(an/this._.sy);ag=(+ag||ag==0)?ag:U;ae=(+ae||ae==0)?ae:T;var Y=~~(this._.sx>0);var X=~~(this._.sy>0);var af=~~(ao/L.abs(ao));var ad=~~(an/L.abs(an));var W=au*af;var V=at*ad;var ap=this.node.style;var am=ag+L.abs(U-ag)*W*(U>ag==Y?1:-1);var al=ae+L.abs(T-ae)*V*(T>ae==X?1:-1);var aj=(ao*af>an*ad?at:au);switch(this.type){case"rect":case"image":var aa=aA.width*au;var ak=aA.height*at;this.attr({height:ak,r:aA.r*aj,width:aa,x:am-aa/2,y:al-ak/2});break;case"circle":case"ellipse":this.attr({rx:aA.rx*af*au,ry:aA.ry*ad*at,r:aA.r*k(af*au,ad*at),cx:am,cy:al});break;case"text":this.attr({x:am,y:al});break;case"path":var ar=a.pathToRelative(aA.path);var Z=true;var ai=Y?W:au;var ah=X?V:at;for(var az=0,ab=ar.length;az<ab;az++){var av=ar[az];var ac=v.call(av[0]);if(ac=="M"&&Z){continue;}else{Z=false;}if(ac=="A"){av[ar[az].length-2]*=ai;av[ar[az].length-1]*=ah;av[1]*=au;av[2]*=at;av[5]=+(af+ad?!!+av[5]:!+av[5]);}else{if(ac=="H"){for(var ay=1,S=av.length;ay<S;ay++){av[ay]*=ai;}}else{if(ac=="V"){for(ay=1,S=av.length;ay<S;ay++){av[ay]*=ah;}}else{for(ay=1,S=av.length;ay<S;
ay++){av[ay]*=(ay%2)?ai:ah;}}}}}var aq=a.pathDimensions(ar);R=am-aq.x-aq.width/2;A=al-aq.y-aq.height/2;ar[0][1]+=R;ar[0][2]+=A;this.attr({path:ar});break;}if(this.type in B&&(af!=1||ad!=1)){if(this.transformations){this.transformations[2]="scale(".concat(af,",",ad,")");this.node.setAttribute("transform",this.transformations.join(d));R=(af==-1)?-aA.x-(aa||0):aA.x;A=(ad==-1)?-aA.y-(ak||0):aA.y;this.attr({x:R,y:A});aA.fx=af-1;aA.fy=ad-1;}else{this.node.filterMatrix=M+".Matrix(M11=".concat(af,", M12=0, M21=0, M22=",ad,', Dx=0, Dy=0, sizingmethod="auto expand", filtertype="bilinear")');ap.filter=(this.node.filterMatrix||l)+(this.node.filterOpacity||l);}}else{if(this.transformations){this.transformations[2]=l;this.node.setAttribute("transform",this.transformations.join(d));aA.fx=0;aA.fy=0;}else{this.node.filterMatrix=l;ap.filter=(this.node.filterMatrix||l)+(this.node.filterOpacity||l);}}aA.scale=[ao,an,ag,ae].join(d);this._.sx=ao;this._.sy=an;}return this;},show:F,toBack:F,toFront:F,toString:function(){return'"'+v.call(this.type)+'": AlloyUI Drawing Element';},translate:F,unhover:function(R,A){return this.detach("mouseover",R).detach("mouseout",A);}};g._getEventConfig=F;g._getEventType=function(A){return A;};c.Element=g;var e=n.Component.create({NAME:"set",EXTENDS:n.ArrayList,prototype:{pop:function(){var A=this;return A._items.pop();},push:function(){var A=this;var R=A._items;var S=arguments;var V=S.length;var U;for(var T=0;T<V;T++){U=S[T];if(U&&U instanceof g||U instanceof e){R[R.length]=S[T];}}return A;},clone:function(){var A=this;var R=new e();R._items=A._items;return R;},invoke:function(S){var A=this;var T=Array.prototype.slice.call(arguments,1);var W;var R=A._items;for(var U=0,V=R.length;U<V;U++){W=R[U];if(S in W){W[S].apply(R[U],T);}}return A;}}});c.Set=e;e.addMethod=function(A){return n.ArrayList.addMethod(c.Set.prototype,A);};var H=n.Object.keys(g.prototype);e.addMethod(H);e.prototype.getRegion=e.prototype.getBBox=function(){var R=this;var A=[];var X=[];var S=[];var V=[];var T=R._items;for(var U=T.length;U--;){var W=T[U].getRegion();A.push(W.x);X.push(W.y);S.push(W.x+W.width);V.push(W.y+W.height);}A=k.apply(0,A);X=k.apply(0,X);return{x:A,y:X,width:G.apply(0,S)-A,height:G.apply(0,V)-X};};e.prototype.attr=function(S,V){var A=this;var R=A._items;if(S&&s(S)&&E(S[0])){for(var T=0,U=S.length;T<U;T++){R[T].attr(S[T]);}}else{for(var T=0,U=R.length;T<U;T++){R[T].attr(S,V);}}return A;};e.prototype.toString=function(){return this._items.join(",");};c.REGEX_ISURL=C;c.REGEX_SEPARATOR=N;c.REGEX_SEPARATOR_GRADIENT=j;c.REGEX_RADIAL_GRADIENT=J;c.MAP_ATTRS_AVAILABLE=m;c.MAP_TYPES_IMAGE_TEXT=B;c.MAP_TYPES_CIRCLE_ELLIPSE=r;c.STR_EMPTY=l;c.STR_FILL=D;c.STR_SPACE=d;c.STR_MS_PROG_ID_PREFIX=M;c.Util=a;c.Element=g;n.Drawing=c;},"@VERSION@",{requires:["aui-base","aui-color-util","substitute"]});AUI.add("aui-drawing-svg",function(t){var h=t.Lang,n=h.isArray,a=h.isFunction,m=h.isObject,p=h.isString,e=h.isUndefined,F=t.config,d=F.doc,C=t.ColorUtil,q=t.Drawing,v=q.Element,H,i=q.Util,r=q.prototype,g=v.prototype,o=Math,z=o.max,j=o.pow,s=q.MAP_ATTRS_AVAILABLE,w=q.MAP_TYPES_IMAGE_TEXT,B=q.MAP_TYPES_CIRCLE_ELLIPSE,E=q.REGEX_ISURL,l=q.REGEX_RADIAL_GRADIENT,k=q.REGEX_SEPARATOR,b=q.REGEX_SEPARATOR_GRADIENT,y="Created with AlloyUI",u=q.STR_EMPTY,f=q.STR_FILL,c=q.STR_SPACE,G=1.2,x=String.prototype.toLowerCase,D=String.prototype.toUpperCase;r.svgns="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";i.CREATE_ELEMENT=function(A){var I=d.createElementNS(r.svgns,A);I.style.webkitTapHighlightColor="rgba(0,0,0,0)";return I;};i.SET_ATTRS=function(J,A){for(var I in A){if(A.hasOwnProperty(I)){J.setAttribute(I,String(A[I]));}}return J;};i.TUNE_TEXT=function(I,L){if(I.type!="text"||!(L.hasOwnProperty("text")||L.hasOwnProperty("font")||L.hasOwnProperty("font-size")||L.hasOwnProperty("x")||L.hasOwnProperty("y"))){return;}var K;var P=I.attrs;var J=I.node;var R=10;if(J.firstChild){R=parseInt(d.defaultView.getComputedStyle(J.firstChild,u).getPropertyValue("font-size"),10);}if(L.hasOwnProperty("text")){P.text=L.text;while(J.firstChild){J.removeChild(J.firstChild);}K=String(L.text).split("\n");for(var M=0,A=K.length;M<A;M++){if(K[M]){var O=i.CREATE_ELEMENT("tspan");if(M){i.SET_ATTRS(O,{dy:R*G,x:P.x});}O.appendChild(d.createTextNode(K[M]));J.appendChild(O);}}}else{K=J.getElementsByTagName("tspan");for(M=0,A=K.length;M<A;M++){if(M){i.SET_ATTRS(K[M],{dy:R*G,x:P.x});}}}i.SET_ATTRS(J,{y:P.y});var N=I.getRegion();var Q=P.y-(N.y+N.height/2);if(Q&&isFinite(Q)){i.SET_ATTRS(J,{y:P.y+Q});}};i.UPDATE_POSITION=function(A){var I=A.getRegion();i.SET_ATTRS(A.pattern,{patternTransform:h.sub("translate({0},{1})",[I.x,I.y])});};H=q.Impl={addGradientFill:function(R,A,U){var N="linear";var M=0.5;var L=0.5;var J=R.style;var K;A=String(A).replace(l,function(ab,Z,ac){N="radial";if(Z&&ac){M=parseFloat(Z);L=parseFloat(ac);var aa=((L>0.5)*2-1);j(M-0.5,2)+j(L-0.5,2)>0.25&&(L=o.sqrt(0.25-j(M-0.5,2))*aa+0.5)&&L!=0.5&&(L=L.toFixed(5)-0.00001*aa);}return u;});A=A.split(b);if(N=="linear"){var Y=A.shift();Y=-parseFloat(Y);if(isNaN(Y)){return null;}K=[0,0,o.cos(Y*o.PI/180),o.sin(Y*o.PI/180)];var W=1/(z(o.abs(K[2]),o.abs(K[3]))||1);K[2]*=W;K[3]*=W;if(K[2]<0){K[0]=-K[2];K[2]=0;}if(K[3]<0){K[1]=-K[3];K[3]=0;}}var Q=i.parseDots(A);if(!Q){return null;}var T=R.getAttribute(f);T=T.match(/^url\(#(.*)\)$/);T&&U.defs.removeChild(d.getElementById(T[1]));var I=i.CREATE_ELEMENT(N+"Gradient");I.id=t.guid();var S;if(N=="radial"){S={fx:M,fy:L};}else{S={x1:K[0],y1:K[1],x2:K[2],y2:K[3]};}i.SET_ATTRS(I,S);U.defs.appendChild(I);for(var X=0,O=Q.length;X<O;X++){var V=i.CREATE_ELEMENT("stop");var P=Q[X].offset;if(!P){if(!X){P="0%";}else{P="100%";}}i.SET_ATTRS(V,{offset:P,"stop-color":Q[X].color||"#fff"});I.appendChild(V);}i.SET_ATTRS(R,{fill:"url(#"+I.id+")",opacity:1,"fill-opacity":1});J.fill=u;J.opacity=1;J.fillOpacity=1;return 1;},clear:function(){var A=this;var I=A.canvas;while(I.firstChild){I.removeChild(I.firstChild);}A.bottom=A.top=null;A.desc=i.CREATE_ELEMENT("desc");A.desc.appendChild(d.createTextNode(y));
I.appendChild(A.desc);A.defs=i.CREATE_ELEMENT("defs");I.appendChild(A.defs);},createCanvas:function(){var J=this;var K=J.get("contentBox");var I=J.get("x");var N=J.get("y");var M=J.get("width");var A=J.get("height");var L=i.CREATE_ELEMENT("svg");i.SET_ATTRS(L,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:M,height:A});K.prepend(L);J.canvas=L;J.clear();},createCircle:function(I,M,K){var A=this;var J=i.CREATE_ELEMENT("circle");A.canvas.appendChild(J);var L=new v(J,A);L.attrs={cx:I,cy:M,r:K,fill:"none",stroke:"#000"};L.type="circle";i.SET_ATTRS(J,L.attrs);return L;},createEllipse:function(I,N,M,L){var A=this;var J=i.CREATE_ELEMENT("ellipse");A.canvas.appendChild(J);var K=new v(J,A);K.attrs={cx:I,cy:N,rx:M,ry:L,fill:"none",stroke:"#000"};K.type="ellipse";i.SET_ATTRS(J,K.attrs);return K;},createImage:function(N,I,O,J,L){var A=this;var K=i.CREATE_ELEMENT("image");i.SET_ATTRS(K,{x:I,y:O,width:J,height:L,preserveAspectRatio:"none"});K.setAttributeNS(A.xlink,"href",N);A.canvas.appendChild(K);var M=new v(K,A);M.attrs={x:I,y:O,width:J,height:L,src:N};M.type="image";return M;},createPath:function(I){var A=this;var J=i.CREATE_ELEMENT("path");A.canvas.appendChild(J);var K=new v(J,A);K.type="path";H.setFillAndStroke(K,{fill:"none",stroke:"#000",path:I});return K;},createRectangle:function(I,O,J,L,N){var A=this;var K=i.CREATE_ELEMENT("rect");A.canvas.appendChild(K);var M=new v(K,A);M.attrs={x:I,y:O,width:J,height:L,r:N,rx:N,ry:N,fill:"none",stroke:"#000"};M.type="rect";i.SET_ATTRS(K,M.attrs);return M;},createText:function(I,M,L){var A=this;var K=i.CREATE_ELEMENT("text");i.SET_ATTRS(K,{x:I,y:M,"text-anchor":"middle"});A.canvas.appendChild(K);var J=new v(K,A);J.attrs={x:I,y:M,"text-anchor":"middle",text:L,font:s.font,stroke:"none",fill:"#000"};J.type="text";H.setFillAndStroke(J,J.attrs);return J;},setFillAndStroke:function(S,ae){var W={"":[0],"none":[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]};var Y=S.node;var U=S.attrs;var Q=S.rotate();var M=function(al,ak){ak=W[x.call(ak)];if(ak){var ai=al.attrs["stroke-width"]||"1";var ag={round:ai,square:ai,butt:0}[al.attrs["stroke-linecap"]||ae["stroke-linecap"]]||0;var aj=[];var ah=ak.length;while(ah--){aj[ah]=ak[ah]*ai+((ah%2)?1:-1)*ag;}i.SET_ATTRS(Y,{"stroke-dasharray":aj.join(",")});}};if(ae.hasOwnProperty("rotation")){Q=ae.rotation;}var P=String(Q).split(k);if(!(P.length-1)){P=null;}else{P[1]=+P[1];P[2]=+P[2];}parseFloat(Q)&&S.rotate(0,true);for(var X in ae){if(ae.hasOwnProperty(X)){if(!s.hasOwnProperty(X)){continue;}var V=ae[X];U[X]=V;switch(X){case"blur":S.blur(V);break;case"rotation":S.rotate(V,true);break;case"href":case"title":case"target":var ab=Y.parentNode;if(x.call(ab.tagName)!="a"){var K=i.CREATE_ELEMENT("a");ab.insertBefore(K,Y);K.appendChild(Y);ab=K;}ab.setAttributeNS(S.paper.xlink,X,V);break;case"cursor":Y.style.cursor=V;break;case"clip-rect":var I=String(V).split(k);if(I.length==4){S.clip&&S.clip.parentNode.parentNode.removeChild(S.clip.parentNode);var J=i.CREATE_ELEMENT("clipPath");var Z=i.CREATE_ELEMENT("rect");J.id=t.guid();i.SET_ATTRS(Z,{x:I[0],y:I[1],width:I[2],height:I[3]});J.appendChild(Z);S.paper.defs.appendChild(J);i.SET_ATTRS(Y,{"clip-path":"url(#"+J.id+")"});S.clip=Z;}if(!V){var ac=d.getElementById(Y.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,u));ac&&ac.parentNode.removeChild(ac);i.SET_ATTRS(Y,{"clip-path":u});delete S.clip;}break;case"path":if(S.type=="path"){var ad="M0,0";if(V){ad=i.pathToAbsolute(V);}i.SET_ATTRS(Y,{d:ad});}break;case"width":Y.setAttribute(X,V);if(U.fx){X="x";V=U.x;}else{break;}case"x":if(U.fx){V=-U.x-(U.width||0);}case"rx":if(X=="rx"&&S.type=="rect"){break;}case"cx":P&&(X=="x"||X=="cx")&&(P[1]+=V-U[X]);Y.setAttribute(X,V);S.pattern&&i.UPDATE_POSITION(S);break;case"height":Y.setAttribute(X,V);if(U.fy){X="y";V=U.y;}else{break;}case"y":if(U.fy){V=-U.y-(U.height||0);}case"ry":if(X=="ry"&&S.type=="rect"){break;}case"cy":P&&(X=="y"||X=="cy")&&(P[2]+=V-U[X]);Y.setAttribute(X,V);S.pattern&&i.UPDATE_POSITION(S);break;case"r":if(S.type=="rect"){i.SET_ATTRS(Y,{rx:V,ry:V});}else{Y.setAttribute(X,V);}break;case"src":if(S.type=="image"){Y.setAttributeNS(S.paper.xlink,"href",V);}break;case"stroke-width":Y.style.strokeWidth=V;Y.setAttribute(X,V);if(U["stroke-dasharray"]){M(S,U["stroke-dasharray"]);}break;case"stroke-dasharray":M(S,V);break;case"translation":var N=String(V).split(k);N[0]=+N[0]||0;N[1]=+N[1]||0;if(P){P[1]+=N[0];P[2]+=N[1];}i.translate.call(S,N[0],N[1]);break;case"scale":N=String(V).split(k);S.scale(+N[0]||1,+N[1]||+N[0]||1,isNaN(parseFloat(N[2]))?null:+N[2],isNaN(parseFloat(N[3]))?null:+N[3]);break;case f:var L=String(V).match(E);if(L){J=i.CREATE_ELEMENT("pattern");var T=i.CREATE_ELEMENT("image");J.id=t.guid();i.SET_ATTRS(J,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});i.SET_ATTRS(T,{x:0,y:0});T.setAttributeNS(S.paper.xlink,"href",L[1]);J.appendChild(T);var af=d.createElement("img");af.style.cssText="position: absolute; left: -9999em; top: -9999em";af.onload=function(){var ag={width:this.offsetWidth,height:this.offsetHeight};i.SET_ATTRS(J,ag);i.SET_ATTRS(T,ag);d.body.removeChild(this);S.paper.safari();};d.body.appendChild(af);af.src=L[1];S.paper.defs.appendChild(J);Y.style.fill="url(#"+J.id+")";i.SET_ATTRS(Y,{fill:"url(#"+J.id+")"});S.pattern=J;S.pattern&&i.UPDATE_POSITION(S);break;}var aa=C.getRGB(V);if(!aa.error){delete ae.gradient;delete U.gradient;if(!e(U.opacity)&&e(ae.opacity)){i.SET_ATTRS(Y,{opacity:U.opacity});}if(!e(U["fill-opacity"])&&e(ae["fill-opacity"])){i.SET_ATTRS(Y,{"fill-opacity":U["fill-opacity"]});}}else{if((B.hasOwnProperty(S.type)||String(V).charAt(0)!="r")&&H.addGradientFill(Y,V,S.paper)){U.gradient=V;U.fill="none";break;}}if(aa.hasOwnProperty("o")){i.SET_ATTRS(Y,{"fill-opacity":aa.o>1?aa.o/100:aa.o});}case"stroke":aa=C.getRGB(V);Y.setAttribute(X,aa.hex);if(X=="stroke"&&aa.hasOwnProperty("o")){i.SET_ATTRS(Y,{"stroke-opacity":aa.o>1?aa.o/100:aa.o});}break;case"gradient":if(B.hasOwnProperty(S.type)||String(V).charAt(0)!="r"){H.addGradientFill(Y,V,S.paper);
}break;case"opacity":if(U.gradient&&!U.hasOwnProperty("stroke-opacity")){i.SET_ATTRS(Y,{"stroke-opacity":V>1?V/100:V});}case"fill-opacity":if(U.gradient){var A=d.getElementById(Y.getAttribute(f).replace(/^url\(#|\)$/g,u));if(A){var O=A.getElementsByTagName("stop");O[O.length-1].setAttribute("stop-opacity",V);}break;}default:if(X=="font-size"){V=parseInt(V,10)+"px";}var R=X.replace(/(\-.)/g,function(ag){return D.call(ag.substring(1));});Y.style[R]=V;Y.setAttribute(X,V);break;}}}i.TUNE_TEXT(S,ae);if(P){S.rotate(P.join(c));}else{parseFloat(Q)&&S.rotate(Q,true);}},remove:function(){var A=this;var I=A.get("contentBox");I.removeChild(A.canvas);for(var J in A){if(r.hasOwnProperty(J)){A[J]=i.removed(J);}}}};r._uiSetWidth=function(I){var A=this;q.superclass._uiSetWidth.apply(A,arguments);A.canvas.setAttribute("width",I);};r._uiSetHeight=function(I){var A=this;q.superclass._uiSetHeight.apply(A,arguments);A.canvas.setAttribute("height",I);};g.createElement=function(J,I){var A=this;A[0]=J;A.id=t.guid();A.node=J;A.paper=I;A.attrs=A.attrs||{};A.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};if(!I.bottom){I.bottom=A;}A.prev=I.top;if(I.top){I.top.next=A;}I.top=A;A.next=null;};g.rotate=function(J,I,L){var A=this;if(A.removed){return A;}if(J==null){if(A._.rt.cx){return[A._.rt.deg,A._.rt.cx,A._.rt.cy].join(c);}return A._.rt.deg;}var K=A.getRegion();J=String(J).split(k);if(J.length-1){I=parseFloat(J[1]);L=parseFloat(J[2]);}J=parseFloat(J[0]);if(I!=null){A._.rt.deg=J;}else{A._.rt.deg+=J;}(L==null)&&(I=null);A._.rt.cx=I;A._.rt.cy=L;I=I==null?K.x+K.width/2:I;L=L==null?K.y+K.height/2:L;if(A._.rt.deg){A.transformations[0]=h.sub("rotate({0} {1} {2})",[A._.rt.deg,I,L]);if(A.clip){i.SET_ATTRS(A.clip,{transform:h.sub("rotate({0} {1} {2})",[-A._.rt.deg,I,L])});}}else{A.transformations[0]=u;if(A.clip){i.SET_ATTRS(A.clip,{transform:u});}}i.SET_ATTRS(A.node,{transform:A.transformations.join(c)});return A;};g.hide=function(){var A=this;!A.removed&&(A.node.style.display="none");return this;};g.show=function(){var A=this;!A.removed&&(A.node.style.display="");return A;};g.remove=function(){var A=this;if(A.removed){return;}i.tear(A,A.paper);A.node.parentNode.removeChild(A.node);for(var I in A){delete A[I];}A.removed=true;};g.getRegion=function(){var A=this;if(A.removed){return A;}if(A.type=="path"){return i.pathDimensions(A.attrs.path);}var J=false;if(A.node.style.display=="none"){A.show();J=true;}var N={};try{N=A.node.getBBox();}catch(L){}finally{N=N||{};}if(A.type=="text"){N={x:N.x,y:Infinity,width:0,height:0};for(var I=0,K=A.node.getNumberOfChars();I<K;I++){var M=A.node.getExtentOfChar(I);if(M.y<N.y){N.y=M.y;}if(M.y+M.height-N.y>N.height){N.height=M.y+M.height-N.y;}if(M.x+M.width-N.x>N.width){N.width=M.x+M.width-N.x;}}}if(J){A.hide();}return N;};g.getBBox=g.getRegion;g.attr=function(A,N){var P=this;if(P.removed){return P;}if(A==null){var L={};for(var K in P.attrs){if(P.attrs.hasOwnProperty(K)){L[K]=P.attrs[K];}}P._.rt.deg&&(L.rotation=P.rotate());(P._.sx!=1||P._.sy!=1)&&(L.scale=P.scale());L.gradient&&L.fill=="none"&&(L.fill=L.gradient)&&delete L.gradient;return L;}if(N==null&&p(A)){if(A=="translation"){return i.translate.call(P);}if(A=="rotation"){return P.rotate();}if(A=="scale"){return P.scale();}if(A==f&&P.attrs.fill=="none"&&P.attrs.gradient){return P.attrs.gradient;}return P.attrs[A];}if(N==null&&n(A)){var O={};for(var J=0,M=A.length;J<M;J++){O[A[J]]=P.attr(A[J]);}return O;}var I=i.applyAttributes(P,A,N);H.setFillAndStroke(P,I);return P;};g.toFront=function(){var A=this;if(A.removed){return A;}A.node.parentNode.appendChild(A.node);var I=A.paper;I.top!=A&&i.toFront(A,I);return A;};g.toBack=function(){var A=this;if(A.removed){return A;}if(A.node.parentNode.firstChild!=A.node){A.node.parentNode.insertBefore(A.node,A.node.parentNode.firstChild);i.toBack(A,A.paper);}return A;};g.insertAfter=function(I){var A=this;if(A.removed){return A;}var J=I.node||I instanceof q.Set&&I.item(I.size()).node;if(J.nextSibling){J.parentNode.insertBefore(A.node,J.nextSibling);}else{J.parentNode.appendChild(A.node);}i.insertAfter(A,I,A.paper);return A;};g.insertBefore=function(I){var A=this;if(A.removed){return A;}var J=I.node||I instanceof q.Set&&I.item(0).node;J.parentNode.insertBefore(A.node,J);i.insertBefore(A,I,A.paper);return A;};g.blur=function(I){var A=this;if(+I!==0){var J=CREATE_ELEMENT("filter");var K=CREATE_ELEMENT("feGaussianBlur");A.attrs.blur=I;J.id=t.guid();i.SET_ATTRS(K,{stdDeviation:+I||1.5});J.appendChild(K);A.paper.defs.appendChild(J);A._blur=J;i.SET_ATTRS(A.node,{filter:"url(#"+J.id+")"});}else{if(A._blur){A._blur.parentNode.removeChild(A._blur);delete A._blur;delete A.attrs.blur;}A.node.removeAttribute("filter");}};},"@VERSION@",{requires:["aui-drawing-base"],condition:{name:"aui-drawing-svg",trigger:"aui-drawing-base",test:function(a){return a.UA.svg;}}});AUI.add("aui-drawing-vml",function(s){var W=s.Lang,z=W.isArray,V=W.isNumber,J=W.isObject,l=W.isString,v=W.isUndefined,p=s.config,D=p.doc,C=s.ColorUtil,g=s.Drawing,k=g.Element,F,a=g.Util,M=function(e){return V(e)?e+"px":e;},K=1000+h+1000,t=g.prototype,u=k.prototype,r=g.MAP_ATTRS_AVAILABLE,I={path:1,rect:1},f={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},n={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},w=g.MAP_TYPES_CIRCLE_ELLIPSE,P=Math,O=P.pow,x=P.round,S=g.STR_MS_PROG_ID_PREFIX,H=g.REGEX_ISURL,N=g.REGEX_RADIAL_GRADIENT,U=g.REGEX_SEPARATOR,m=g.REGEX_SEPARATOR_GRADIENT,o=/([clmz]),?([^clmz]*)/gi,b=/-?[^,\s-]+/g,c=/ progid:\S+Blur\([^\)]+\)/g,q=g.STR_EMPTY,G=g.STR_FILL,h=g.STR_SPACE,d=1.2,j="M{0},{1}l{2},0,0,{3},{4},0z",y="M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",Q="position: absolute; left: -9999em; top: -9999em; padding: 0; margin: 0; line-height: 1; display: inline;",E="display: inline-block; position: relative; clip: rect(0 {1} {0} 0); overflow: hidden; height: {0}; width: {1};",T="position: absolute; left: 0; top: 0; height: {0}; width: {1};",L=String.prototype.toLowerCase,B=String.prototype.toUpperCase,i=10;
D.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{if(!D.namespaces.rvml){D.namespaces.add("rvml","urn:schemas-microsoft-com:vml");}a.CREATE_ELEMENT=function(e){return D.createElement("<rvml:"+e+' class="rvml">');};}catch(R){a.CREATE_ELEMENT=function(e){return D.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');};}a.path2vml=function(af){var ad=/[ahqstv]/ig;var Z=a.pathToAbsolute;var ac;if(String(af).match(ad)){Z=a.path2curve;}ad=/[clmz]/g;if(Z==a.pathToAbsolute&&!String(af).match(ad)){ac=String(af).replace(o,function(aj,al,ah){var ak=[];var ag=L.call(al)=="m";var ai=f[al];ah.replace(b,function(am){if(ag&&ak.length==2){ai+=ak+f[al=="m"?"l":"L"];ak=[];}ak.push(x(am*i));});return ai+ak;});return ac;}var ae=Z(af);var X;var e;ac=[];for(var ab=0,Y=ae.length;ab<Y;ab++){X=ae[ab];e=L.call(ae[ab][0]);if(e=="z"){e="x";}for(var aa=1,A=X.length;aa<A;aa++){e+=x(X[aa]*i)+(aa!=A-1?",":q);}ac.push(e);}return ac.join(h);};a.rectPath=function(e,Z,A,X,Y){if(Y){return W.sub(y,[e+Y,Z,A-Y*2,Y,-Y,X-Y*2,Y*2-A,Y*2-X]);}else{return W.sub(j,[e,Z,A,X,-A]);}};F=g.Impl={addGradientFill:function(Z,ad){Z.attrs=Z.attrs||{};var ae=Z.attrs;var af;var ab="linear";var ac=".5 .5";var X;Z.attrs.gradient=ad;ad=String(ad).replace(N,function(ah,ai,ag){ab="radial";if(ai&&ag){ai=parseFloat(ai);ag=parseFloat(ag);if(O(ai-0.5,2)+O(ag-0.5,2)>0.25){ag=P.sqrt(0.25-O(ai-0.5,2))*((ag>0.5)*2-1)+0.5;}ac=ai+h+ag;}return q;});ad=ad.split(m);if(ab=="linear"){X=ad.shift();X=-parseFloat(X);if(isNaN(X)){return null;}}var aa=a.parseDots(ad);if(!aa){return null;}Z=Z.shape||Z.node;af=Z.getElementsByTagName(G)[0]||a.CREATE_ELEMENT(G);if(!af.parentNode){Z.appendChild(af);}if(aa.length){af.on=true;af.method="none";af.color=aa[0].color;af.color2=aa[aa.length-1].color;var e=[];for(var Y=0,A=aa.length;Y<A;Y++){if(aa[Y].offset){e.push(aa[Y].offset+h+aa[Y].color);}}if(af.colors){af.colors.value=e.length?e.join():"0% "+af.color;}if(ab=="radial"){af.type="gradientradial";af.focus="100%";af.focussize=ac;af.focusposition=ac;}else{af.type="gradient";af.angle=(270-X)%360;}}return 1;},clear:function(){var e=this;e.canvas.innerHTML=q;e.span=D.createElement("span");e.span.style.cssText=Q;e.canvas.appendChild(e.span);e.bottom=e.top=null;},createCanvas:function(){var ac=this;var Y=ac.get("contentBox");var aa=ac.get("x");var Z=ac.get("y");var e=M(ac.get("width"));var ad=M(ac.get("height"));var A=D.createElement("div");ac.set("width",1000);ac.set("height",1000);ac.coordsize=i*1000+h+i*1000;ac.coordorigin="0 0";var ab=D.createElement("span");ab.style.cssText=Q;A.appendChild(ab);ac.span=ab;ac.canvas=A;var X=A.style;A.style.cssText=W.sub(E,[ad,e]);Y.prepend(A);},createCircle:function(A,ac,Z){var e=this;var ab=a.CREATE_ELEMENT("group");var Y=a.CREATE_ELEMENT("oval");var X=Y.style;ab.style.cssText=W.sub(T,[M(e.get("height")),M(e.get("width"))]);ab.coordsize=K;ab.coordorigin=e.coordorigin;ab.appendChild(Y);var aa=new k(Y,ab,e);aa.type="circle";F.setFillAndStroke(aa,{stroke:"#000",fill:"none"});aa.attrs.cx=A;aa.attrs.cy=ac;aa.attrs.r=Z;aa.setBox({x:A-Z,y:ac-Z,width:Z*2,height:Z*2});e.canvas.appendChild(ab);return aa;},createEllipse:function(A,ac,ab,Z){var e=this;var aa=a.CREATE_ELEMENT("group");var Y=a.CREATE_ELEMENT("oval");aa.style.cssText=W.sub(T,[M(e.get("height")),M(e.get("width"))]);aa.coordsize=K;aa.coordorigin=e.coordorigin;aa.appendChild(Y);var X=new k(Y,aa,e);X.type="ellipse";F.setFillAndStroke(X,{stroke:"#000"});X.attrs.cx=A;X.attrs.cy=ac;X.attrs.rx=ab;X.attrs.ry=Z;X.setBox({x:A-ab,y:ac-Z,width:ab*2,height:Z*2});e.canvas.appendChild(aa);return X;},createImage:function(e,ab,aa,ac,Z){var ae=this;var ad=a.CREATE_ELEMENT("group");var X=a.CREATE_ELEMENT("image");var Y=X.style;ad.style.cssText=W.sub(T,[M(ae.get("height")),M(ae.get("width"))]);ad.coordsize=K;ad.coordorigin=ae.coordorigin;X.src=e;ad.appendChild(X);var A=new k(X,ad,ae);A.type="image";A.attrs.src=e;A.attrs.x=ab;A.attrs.y=aa;A.attrs.w=ac;A.attrs.h=Z;A.setBox({x:ab,y:aa,width:ac,height:Z});ae.canvas.appendChild(ad);return A;},createPath:function(X){var A=this;var ab=a.CREATE_ELEMENT("group");ab.style.cssText=W.sub(T,[M(A.get("height")),M(A.get("width"))]);ab.coordsize=A.coordsize;ab.coordorigin=A.coordorigin;var Y=a.CREATE_ELEMENT("shape");var Z=Y.style;Z.width=A.get("width")+"px";Z.height=A.get("height")+"px";Y.coordsize=K;Y.coordorigin=A.coordorigin;ab.appendChild(Y);var aa=new k(Y,ab,A);var e={fill:"none",stroke:"#000"};if(X){e.path=X;}aa.isAbsolute=true;aa.type="path";aa.path=[];aa.Path=q;F.setFillAndStroke(aa,e);A.canvas.appendChild(ab);return aa;},createRectangle:function(Z,X,aa,A,e){var ac=this;var ad=a.rectPath(Z,X,aa,A,e);var Y=ac.path(ad);var ab=Y.attrs;Y.X=ab.x=Z;Y.Y=ab.y=X;Y.W=ab.width=aa;Y.H=ab.height=A;ab.r=e;ab.path=ad;Y.type="rect";return Y;},createText:function(ac,ab,ag){var ae=this;var ad=a.CREATE_ELEMENT("group");var Y=a.CREATE_ELEMENT("shape");var Z=Y.style;var ah=a.CREATE_ELEMENT("path");var e=ah.style;var aa=a.CREATE_ELEMENT("textpath");var X=M(ae.get("width"));var af=M(ae.get("height"));ad.style.cssText=W.sub(T,[af,X]);ad.coordsize=K;ad.coordorigin=ae.coordorigin;ah.v=W.sub("m{0},{1}l{2},{1}",[x(ac*10),x(ab*10),x(ac*10)+1]);ah.textpathok=true;Z.width=X;Z.height=af;aa.string=String(ag);aa.on=true;Y.appendChild(aa);Y.appendChild(ah);ad.appendChild(Y);var A=new k(aa,ad,ae);A.shape=Y;A.textpath=ah;A.type="text";A.attrs.text=ag;A.attrs.x=ac;A.attrs.y=ab;A.attrs.w=1;A.attrs.h=1;F.setFillAndStroke(A,{font:r.font,stroke:"none",fill:"#000"});A.setBox();ae.canvas.appendChild(ad);return A;},remove:function(){var e=this;e.canvas.parentNode.removeChild(e.canvas);for(var A in e){if(t.hasOwnProperty(A)){e[A]=a.removed(A);}}return true;},setFillAndStroke:function(ae,an){ae.attrs=ae.attrs||{};var ak=ae.node;var ao=ae.attrs;var aa=ak.style;var ab;var am=(an.x!=ao.x||an.y!=ao.y||an.width!=ao.width||an.height!=ao.height||an.r!=ao.r)&&ae.type=="rect";var at=ae;for(var af in an){if(an.hasOwnProperty(af)){ao[af]=an[af];}}if(am){ao.path=a.rectPath(ao.x,ao.y,ao.width,ao.height,ao.r);
ae.X=ao.x;ae.Y=ao.y;ae.W=ao.width;ae.H=ao.height;}if(an.href){ak.href=an.href;}if(an.title){ak.title=an.title;}if(an.target){ak.target=an.target;}if(an.cursor){aa.cursor=an.cursor;}if("blur" in an){ae.blur(an.blur);}if(an.path&&ae.type=="path"||am){ak.path=a.path2vml(ao.path);}if(an.rotation!=null){ae.rotate(an.rotation,true);}if(an.translation){ab=String(an.translation).split(U);a.translate.call(ae,ab[0],ab[1]);if(ae._.rt.cx!=null){ae._.rt.cx+=+ab[0];ae._.rt.cy+=+ab[1];ae.setBox(ae.attrs,ab[0],ab[1]);}}if(an.scale){ab=String(an.scale).split(U);ae.scale(+ab[0]||1,+ab[1]||+ab[0]||1,+ab[2]||null,+ab[3]||null);}if("clip-rect" in an){var e=String(an["clip-rect"]).split(U);if(e.length==4){e[2]=+e[2]+(+e[0]);e[3]=+e[3]+(+e[1]);var ag=ak.clipRect||D.createElement("div");var ar=ag.style;var ad=ak.parentNode;ar.clip=W.sub("rect({1}px {2}px {3}px {0}px)",e);if(!ak.clipRect){ar.position="absolute";ar.top=0;ar.left=0;ar.width=ae.paper.get("width")+"px";ar.height=ae.paper.get("height")+"px";ad.parentNode.insertBefore(ag,ad);ag.appendChild(ad);ak.clipRect=ag;}}if(!an["clip-rect"]&&ak.clipRect){ak.clipRect.style.clip=q;}}if(ae.type=="image"&&an.src){ak.src=an.src;}if(ae.type=="image"&&an.opacity){ak.filterOpacity=S+".Alpha(opacity="+(an.opacity*100)+")";aa.filter=(ak.filterMatrix||q)+(ak.filterOpacity||q);}if(an.font){aa.font=an.font;}if(an["font-family"]){aa.fontFamily='"'+an["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,q)+'"';}if(an["font-size"]){aa.fontSize=an["font-size"];}if(an["font-weight"]){aa.fontWeight=an["font-weight"];}if(an["font-style"]){aa.fontStyle=an["font-style"];}if(an.opacity!=null||an["stroke-width"]!=null||an.fill!=null||an.stroke!=null||an["stroke-width"]!=null||an["stroke-opacity"]!=null||an["fill-opacity"]!=null||an["stroke-dasharray"]!=null||an["stroke-miterlimit"]!=null||an["stroke-linejoin"]!=null||an["stroke-linecap"]!=null){ak=ae.shape||ak;var al=(ak.getElementsByTagName(G)&&ak.getElementsByTagName(G)[0]);var ap=false;var X;if(!al){ap=al=a.CREATE_ELEMENT(G);}if("fill-opacity" in an||"opacity" in an){X=((+ao["fill-opacity"]+1||2)-1)*((+ao.opacity+1||2)-1)*((+C.getRGB(an.fill).o+1||2)-1);if(X<0){X=0;}else{if(X>1){X=1;}}al.opacity=X;}if(an.fill){al.on=true;}if(al.on==null||an.fill=="none"){al.on=false;}if(al.on&&an.fill){var Z=an.fill.match(H);if(Z){al.src=Z[1];al.type="tile";}else{var Y=C.getRGB(an.fill);al.color=Y.hex;al.src=q;al.type="solid";if(Y.error&&(at.type in w||String(an.fill).charAt(0)!="r")&&F.addGradientFill(at,an.fill)){ao.fill="none";ao.gradient=an.fill;}}}if(ap){ak.appendChild(al);}var ac=(ak.getElementsByTagName("stroke")&&ak.getElementsByTagName("stroke")[0]);var aq=false;if(!ac){aq=ac=a.CREATE_ELEMENT("stroke");}if((an.stroke&&an.stroke!="none")||an["stroke-width"]||an["stroke-opacity"]!=null||an["stroke-dasharray"]||an["stroke-miterlimit"]||an["stroke-linejoin"]||an["stroke-linecap"]){ac.on=true;}if(an.stroke=="none"||ac.on==null||an.stroke==0||an["stroke-width"]==0){ac.on=false;}var aj=C.getRGB(an.stroke);if(ac.on&&an.stroke){ac.color=aj.hex;}X=((+ao["stroke-opacity"]+1||2)-1)*((+ao.opacity+1||2)-1)*((+aj.o+1||2)-1);var ai=(parseFloat(an["stroke-width"])||1)*0.75;if(X<0){X=0;}else{if(X>1){X=1;}}if(an["stroke-width"]==null){ai=ao["stroke-width"];}if(an["stroke-width"]){ac.weight=ai;}if(ai&&ai<1&&(X*=ai)){ac.weight=1;}ac.opacity=X;if(an["stroke-linejoin"]){ac.joinstyle=an["stroke-linejoin"]||"miter";}ac.miterlimit=an["stroke-miterlimit"]||8;var A=an["stroke-linecap"];if(A){ac.endcap="round";if(A=="butt"){ac.endcap="flat";}else{if(A=="square"){ac.endcap=A;}}}var ah=an["stroke-dasharray"];if(ah){ac.dashstyle=q;if(n.hasOwnProperty(ah)){ac.dashstyle=n[an["stroke-dasharray"]];}}if(aq){ak.appendChild(ac);}}if(at.type=="text"){aa=at.paper.span.style;if(ao.font){aa.font=ao.font;}if(ao["font-family"]){aa.fontFamily=ao["font-family"];}if(ao["font-size"]){aa.fontSize=ao["font-size"];}if(ao["font-weight"]){aa.fontWeight=ao["font-weight"];}if(ao["font-style"]){aa.fontStyle=ao["font-style"];}if(at.node.string){at.paper.span.innerHTML=String(at.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>");}at.W=ao.w=at.paper.span.offsetWidth;at.H=ao.h=at.paper.span.offsetHeight;at.X=ao.x;at.Y=ao.y+x(at.H/2);switch(ao["text-anchor"]){case"start":at.node.style["v-text-align"]="left";at.bbx=x(at.W/2);break;case"end":at.node.style["v-text-align"]="right";at.bbx=-x(at.W/2);break;default:at.node.style["v-text-align"]="center";break;}}}};u.createElement=function(X,Y,A){var e=this;e[0]=X;e.id=s.guid();e.node=X;e.X=0;e.Y=0;e.attrs={};e.Group=Y;e.paper=A;e._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};if(!A.bottom){A.bottom=e;}e.prev=A.top;if(A.top){A.top.next=e;}A.top=e;e.next=null;};u.rotate=function(A,e,X){if(this.removed){return this;}if(A==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(h);}return this._.rt.deg;}A=String(A).split(U);if(A.length-1){e=parseFloat(A[1]);X=parseFloat(A[2]);}A=parseFloat(A[0]);if(e!=null){this._.rt.deg=A;}else{this._.rt.deg+=A;}if(X==null){e=null;}this._.rt.cx=e;this._.rt.cy=X;this.setBox(this.attrs,e,X);this.Group.style.rotation=this._.rt.deg;return this;};u.setBox=function(Y,Z,X){if(this.removed){return this;}var e=this.Group.style;var aa=(this.shape&&this.shape.style)||this.node.style;Y=Y||{};for(var ab in Y){if(Y.hasOwnProperty(ab)){this.attrs[ab]=Y[ab];}}Z=Z||this._.rt.cx;X=X||this._.rt.cy;var af=this.attrs;var ai;var ah;var ak;var ad;switch(this.type){case"circle":ai=af.cx-af.r;ah=af.cy-af.r;ak=ad=af.r*2;break;case"ellipse":ai=af.cx-af.rx;ah=af.cy-af.ry;ak=af.rx*2;ad=af.ry*2;break;case"image":ai=+af.x;ah=+af.y;ak=af.width||0;ad=af.height||0;break;case"text":this.textpath.v=["m",x(af.x),", ",x(af.y-2),"l",x(af.x)+1,", ",x(af.y-2)].join(q);ai=af.x-x(this.W/2);ah=af.y-this.H/2;ak=this.W;ad=this.H;break;case"rect":case"path":if(!this.attrs.path){ai=0;ah=0;ak=this.paper.get("width");ad=this.paper.get("height");}else{var ac=a.pathDimensions(this.attrs.path);ai=ac.x;ah=ac.y;ak=ac.width;ad=ac.height;}break;default:ai=0;
ah=0;ak=this.paper.get("width");ad=this.paper.get("height");break;}Z=(Z==null)?ai+ak/2:Z;X=(X==null)?ah+ad/2:X;var ae=this.paper.get("width");var aj=this.paper.get("height");var A=Z-ae/2;var ag=X-aj/2;var al;if(e.left!=(al=A+"px")){e.left=al;}if(e.top!=(al=ag+"px")){e.top=al;}this.X=I.hasOwnProperty(this.type)?-A:ai;this.Y=I.hasOwnProperty(this.type)?-ag:ah;this.W=ak;this.H=ad;if(I.hasOwnProperty(this.type)){if(aa.left!=(al=-A*i+"px")){aa.left=al;}if(aa.top!=(al=-ag*i+"px")){aa.top=al;}}else{if(this.type=="text"){if(aa.left!=(al=-A+"px")){aa.left=al;}if(aa.top!=(al=-ag+"px")){aa.top=al;}}else{if(e.width!=(al=ae+"px")){e.width=al;}if(e.height!=(al=aj+"px")){e.height=al;}if(aa.left!=(al=ai-A+"px")){aa.left=al;}if(aa.top!=(al=ah-ag+"px")){aa.top=al;}if(aa.width!=(al=ak+"px")){aa.width=al;}if(aa.height!=(al=ad+"px")){aa.height=al;}}}};u.hide=function(){if(!this.removed){this.Group.style.display="none";}return this;};u.show=function(){if(!this.removed){this.Group.style.display="block";}return this;};u.getRegion=function(){if(this.removed){return this;}if(I.hasOwnProperty(this.type)){return a.pathDimensions(this.attrs.path);}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H};};u.remove=function(){if(this.removed){return;}a.tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);if(this.shape){this.shape.parentNode.removeChild(this.shape);}for(var e in this){delete this[e];}this.removed=true;};u.attr=function(X,ab){var e=this;if(e.removed){return e;}var Z;if(X==null){var Y={};for(Z in e.attrs){if(e.attrs.hasOwnProperty(Z)){Y[Z]=e.attrs[Z];}}if(e._.rt.deg){Y.rotation=e.rotate();}if(e._.sx!=1||e._.sy!=1){Y.scale=e.scale();}if(Y.gradient&&Y.fill=="none"){Y.fill=Y.gradient;delete Y.gradient;}return Y;}if(ab==null&&l(X)){if(X=="translation"){return a.translate.call(e);}if(X=="rotation"){return e.rotate();}if(X=="scale"){return e.scale();}if(X==G&&e.attrs.fill=="none"&&e.attrs.gradient){return e.attrs.gradient;}return e.attrs[X];}if(e.attrs&&ab==null&&z(X)){var aa;var A={};for(Z=0,aa=X.length;Z<aa;Z++){A[X[Z]]=e.attr(X[Z]);}return A;}var ac=a.applyAttributes(e,X,ab);if(ac){if(ac.text&&e.type=="text"){e.node.string=ac.text;}F.setFillAndStroke(e,ac);if(ac.gradient&&((w).hasOwnProperty(e.type)||String(ac.gradient).charAt(0)!="r")){F.addGradientFill(e,ac.gradient);}if(!I.hasOwnProperty(e.type)||e._.rt.deg){e.setBox(e.attrs);}}return e;};u.toFront=function(){if(!this.removed){this.Group.parentNode.appendChild(this.Group);}if(this.paper.top!=this){a.toFront(this,this.paper);}return this;};u.toBack=function(){if(this.removed){return this;}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);a.toBack(this,this.paper);}return this;};u.insertAfter=function(e){if(this.removed){return this;}if(e instanceof g.Set){e=e.item(e.size());}if(e.Group.nextSibling){e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling);}else{e.Group.parentNode.appendChild(this.Group);}a.insertAfter(this,e,this.paper);return this;};u.insertBefore=function(e){if(this.removed){return this;}if(e instanceof g.Set){e=e.item(0);}e.Group.parentNode.insertBefore(this.Group,e.Group);a.insertBefore(this,e,this.paper);return this;};u.blur=function(e){var A=this.node.runtimeStyle;var X=A.filter;X=X.replace(c,q);if(+e!==0){this.attrs.blur=e;A.filter=X+h+S+".Blur(pixelradius="+(+e||1.5)+")";A.margin=W.sub("-{0}px 0 0 -{0}px",[x(+e||1.5)]);}else{A.filter=X;A.margin=0;delete this.attrs.blur;}};t._SYNC_UI_ATTRS=t._SYNC_UI_ATTRS.join(",").replace(/,(height|width)/g,"").split(",");t._uiSetWidth=function(Y){var X=this;g.superclass._uiSetWidth.apply(X,arguments);var A=X.canvas.style;var e=X.get("height");if(V(Y)){Y+="px";}if(V(e)){e+="px";}A.width=Y;A.clip="rect(0 "+Y+" "+e+" 0)";};t._uiSetHeight=function(Y){var A=this;g.superclass._uiSetHeight.apply(A,arguments);var e=A.canvas.style;var X=A.get("width");if(V(Y)){Y+="px";}if(V(X)){X+="px";}e.height=Y;e.clip="rect(0 "+X+" "+Y+" 0)";};},"@VERSION@",{requires:["aui-drawing-base"],condition:{name:"aui-drawing-vml",trigger:"aui-drawing-base",test:function(a){return a.UA.vml;}}});AUI.add("aui-drawing-animate",function(o){var e=o.Lang,a=e.isFunction,l=e.isString,E=o.ColorUtil,m=o.Drawing,r=m.Element,x=m.Set,g=m.Util,d=r.prototype,n=m.MAP_ATTRS_AVAILABLE,k=Math,s=k.abs,z=k.max,v=k.min,h=k.pow,p=k.round,D=/^(from|to|\d+%)$/,y=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,i=m.REGEX_SEPARATOR,q=m.STR_EMPTY,b=m.STR_SPACE,f="number",j={along:"along",blur:f,"clip-rect":"csv",cx:f,cy:f,fill:"color","fill-opacity":f,"font-size":f,height:f,opacity:f,path:"path",r:f,rotation:"csv",rx:f,ry:f,scale:"csv",stroke:"color","stroke-opacity":f,"stroke-width":f,translation:"csv",width:f,x:f,y:f};var C=m.Animation={};C.easing_formulas={linear:function(A){return A;},"<":function(A){return h(A,3);},">":function(A){return h(A-1,3)+1;},"<>":function(A){A=A*2;if(A<1){return h(A,3)/2;}A-=2;return(h(A,3)+2)/2;},backIn:function(F){var A=1.70158;return F*F*((A+1)*F-A);},backOut:function(F){F=F-1;var A=1.70158;return F*F*((A+1)*F+A)+1;},elastic:function(G){if(G==0||G==1){return G;}var F=0.3;var A=F/4;return h(2,-10*G)*k.sin((G-A)*(2*k.PI)/F)+1;},bounce:function(H){var F=7.5625;var G=2.75;var A;if(H<(1/G)){A=F*H*H;}else{if(H<(2/G)){H-=(1.5/G);A=F*H*H+0.75;}else{if(H<(2.5/G)){H-=(2.25/G);A=F*H*H+0.9375;}else{H-=(2.625/G);A=F*H*H+0.984375;}}}return A;}};var w=[];C.elements=w;C.animation=function(){var L=+new Date;for(var V=0;V<w.length;V++){if(V!="length"&&w.hasOwnProperty(V)){var aa=w[V];if(aa.stop||aa.el.removed){continue;}var I=L-aa.start;var S=aa.ms;var R=aa.easing;var W=aa.from;var P=aa.diff;var F=aa.to;var O=aa.t;var K=aa.el;var Q={};var A;if(I<S){var H=R(I/S);for(var T in W){if(W.hasOwnProperty(T)){switch(j[T]){case"along":A=H*S*P[T];F.back&&(A=F.len-A);var U=getPointAtLength(F[T],A);K.translate(P.sx-P.x||0,P.sy-P.y||0);P.x=U.x;P.y=U.y;K.translate(U.x-P.sx,U.y-P.sy);F.rot&&K.rotate(P.r+U.alpha,U.x,U.y);
break;case f:A=+W[T]+H*S*P[T];break;case"color":A="rgb("+[B(p(W[T].r+H*S*P[T].r)),B(p(W[T].g+H*S*P[T].g)),B(p(W[T].b+H*S*P[T].b))].join(",")+")";break;case"path":A=[];for(var Y=0,G=W[T].length;Y<G;Y++){A[Y]=[W[T][Y][0]];for(var X=1,Z=W[T][Y].length;X<Z;X++){A[Y][X]=+W[T][Y][X]+H*S*P[T][Y][X];}A[Y]=A[Y].join(b);}A=A.join(b);break;case"csv":switch(T){case"translation":var N=H*S*P[T][0]-O.x;var M=H*S*P[T][1]-O.y;O.x+=N;O.y+=M;A=N+b+M;break;case"rotation":A=+W[T][0]+H*S*P[T][0];W[T][1]&&(A+=","+W[T][1]+","+W[T][2]);break;case"scale":A=[+W[T][0]+H*S*P[T][0],+W[T][1]+H*S*P[T][1],(2 in F[T]?F[T][2]:q),(3 in F[T]?F[T][3]:q)].join(b);break;case"clip-rect":A=[];Y=4;while(Y--){A[Y]=+W[T][Y]+H*S*P[T][Y];}break;}break;default:var J=[].concat(W[T]);var A=[];Y=K.paper.customAttributes[T].length;while(Y--){A[Y]=+W[Y]+H*S*P[T][Y];}break;}Q[T]=A;}}K.attr(Q);K._run&&K._run.call(K);}else{if(F.along){U=getPointAtLength(F.along,F.len*!F.back);K.translate(P.sx-(P.x||0)+U.x-P.sx,P.sy-(P.y||0)+U.y-P.sy);F.rot&&K.rotate(P.r+U.alpha,U.x,U.y);}if(O.x||O.y){K.translate(-O.x,-O.y);}if(F.scale){F.scale+=q;}K.attr(F);w.splice(V--,1);}}}if(o.UA.svg&&K&&K.paper){K.paper.safari();}if(w.length){setTimeout(C.animation);}};var u=function(F,A){return F.key-A.key;};var t=function(A,F,J,G,H){var I=J-G;F.timeouts.push(setTimeout(function(){if(a(H)){H.call(F);}F.animate(A,I,A.easing);},G));};var B=function(A){return z(v(A,255),0);};function c(R,H,F,Q,P,L){var M=3*H;var O=3*(Q-H)-M;var A=1-M-O;var K=3*F;var N=3*(P-F)-K;var S=1-K-N;function J(T){return((A*T+O)*T+M)*T;}function G(T,V){var U=I(T,V);return((S*U+N)*U+K)*U;}function I(T,aa){var Z,Y,W,U,X,V;for(W=T,V=0;V<8;V++){U=J(W)-T;if(s(U)<aa){return W;}X=(3*A*W+2*O)*W+M;if(s(X)<0.000001){break;}W=W-U/X;}Z=0;Y=1;W=T;if(W<Z){return Z;}if(W>Y){return Y;}while(Z<Y){U=J(W);if(s(U-T)<aa){return W;}if(T>U){Z=W;}else{Y=W;}W=(Y-Z)/2+Z;}return W;}return G(R,1/(200*L));}d.animateWith=function(G,I,A,K,J){for(var F=0,H=w.length;F<H;F++){if(w[F].el.id==G.id){I.start=w[F].start;}}return this.animate(I,A,K,J);};C.along=function(A){return function(H,G,F,J){var I={back:A};a(F)?(J=F):(I.rot=F);H&&H.constructor==r&&(H=H.attrs.path);H&&(I.along=H);return this.animate(I,G,J);};};d.animateAlong=C.along();d.animateAlongBack=C.along(1);d.onAnimation=function(F){var A=this;A._run=F||0;return A;};d.animate=function(ag,W,V,J){var af=this;af.timeouts=af.timeouts||[];if(a(V)||!V){J=V||null;}if(af.removed){J&&J.call(af);return af;}var aa={};var F={};var O={};var N=false;var T=af.paper.customAttributes;for(var X in ag){if(ag.hasOwnProperty(X)){if(j.hasOwnProperty(X)||T.hasOwnProperty(X)){N=true;aa[X]=af.attr(X);if(aa[X]==null){aa[X]=n[X];}F[X]=ag[X];switch(j[X]){case"along":var ad=getTotalLength(ag[X]);var Y=getPointAtLength(ag[X],ad*!!ag.back);var K=af.getRegion();O[X]=ad/W;O.tx=K.x;O.ty=K.y;O.sx=Y.x;O.sy=Y.y;F.rot=ag.rot;F.back=ag.back;F.len=ad;if(ag.rot){O.r=parseFloat(af.rotate())||0;}break;case f:O[X]=(F[X]-aa[X])/W;break;case"color":aa[X]=E.getRGB(aa[X]);var Z=E.getRGB(F[X]);O[X]={r:(Z.r-aa[X].r)/W,g:(Z.g-aa[X].g)/W,b:(Z.b-aa[X].b)/W};break;case"path":var L=g.path2curve(aa[X],F[X]);aa[X]=L[0];var R=L[1];O[X]=[];for(var ac=0,H=aa[X].length;ac<H;ac++){O[X][ac]=[0];for(var ab=1,ae=aa[X][ac].length;ab<ae;ab++){O[X][ac][ab]=(R[ac][ab]-aa[X][ac][ab])/W;}}break;case"csv":var A=String(ag[X]).split(i);var M=String(aa[X]).split(i);switch(X){case"translation":aa[X]=[0,0];O[X]=[A[0]/W,A[1]/W];break;case"rotation":aa[X]=(M[1]==A[1]&&M[2]==A[2])?M:[0,A[1],A[2]];O[X]=[(A[0]-aa[X][0])/W,0,0];break;case"scale":ag[X]=A;aa[X]=String(aa[X]).split(i);O[X]=[(A[0]-aa[X][0])/W,(A[1]-aa[X][1])/W,0,0];break;case"clip-rect":aa[X]=String(aa[X]).split(i);O[X]=[];ac=4;while(ac--){O[X][ac]=(A[ac]-aa[X][ac])/W;}break;}F[X]=A;break;default:A=[].concat(ag[X]);M=[].concat(aa[X]);O[X]=[];ac=T[X].length;while(ac--){O[X][ac]=((A[ac]||0)-(M[ac]||0))/W;}break;}}}}if(!N){var U=[];var I;for(var ah in ag){if(ag.hasOwnProperty(ah)&&D.test(ah)){X={value:ag[ah]};if(ah=="from"){ah=0;}else{if(ah=="to"){ah=100;}}X.key=parseInt(ah,10);U.push(X);}}U.sort(u);if(U[0].key){U.unshift({key:0,value:af.attrs});}var S;var G=U.length;for(var ac=0;ac<G;ac++){X=U[ac];S=U[ac-1];t(X.value,af,W/100*X.key,W/100*(S&&S.key||0),S&&S.value.callback);}I=U[G-1].value.callback;if(I){af.timeouts.push(setTimeout(function(){I.call(af);},W));}}else{var P=C.easing_formulas[V];if(!P){P=String(P).match(y);if(P&&P.length==5){var Q=P;P=function(ai){return c(ai,+Q[1],+Q[2],+Q[3],+Q[4],W);};}else{P=function(ai){return ai;};}}w.push({start:ag.start||+new Date,ms:W,easing:P,from:aa,diff:O,to:F,el:af,t:{x:0,y:0}});if(a(J)){af._ac=setTimeout(function(){J.call(af);},W);}if(w.length==1){setTimeout(C.animation);}}return af;};d.stop=function(){var A=this;for(var F=0;F<w.length;F++){if(w[F].el.id==A.id){w.splice(F--,1);}}A.timeouts=[];clearTimeout(A._ac);delete A._ac;return A;};d.translate=function(A,F){return this.attr({translation:A+" "+F});};x.addMethod(["animateAlong","animateAlongBack","animateWith","onAnimation","stop","translate"]);x.prototype.animate=function(G,A,J,N){var M=this;if(a(J)||!J){N=J||null;}var K=M._items;var F=K.length;var H=F;var O;var L;var I;if(N){I=function(){if(!--F){N.call(M);}};}J=l(J)?J:I;O=K[--H].animate(G,A,J,I);while(H--){L=K[H];if(L&&!L.removed){L.animateWith(O,G,A,J,I);}}return M;};},"@VERSION@",{requires:["aui-drawing-base"]});AUI.add("aui-drawing-drag",function(b){var f=b.Lang,c=b.config.doc,d=b.Drawing,a=d.Element,h=a.prototype,e={standAlone:true},j={mousedown:"gesturemovestart",mousemove:"gesturemove",mouseup:"gesturemoveend"},g="createTouch" in c;var i=d.Drag={drags:[]};a._getEventType=function(k){return j[k]||k;};a._getEventConfig=function(k,l){return j[l]?e:null;};i.dragMove=function(p){var k=p.clientX;var r=p.clientY;var m;var o=i.drags;var l=o.length;while(l--){m=o[l];if(g){var n=p.touches.length;var q;while(n--){q=p.touches[n];if(q.identifier==m.el._drag.id){k=q.clientX;r=q.clientY;(p.originalEvent?p.originalEvent:p).preventDefault();break;}}}else{p.preventDefault();
}if(m.move){m.move.call(m.el,k-m.el._drag.x,r-m.el._drag.y,k,r);}}};i.dragUp=function(){i._dragMoveHandle.detach();i._dragUpHandle.detach();var m=i.drags;var l=m.length;var k;while(l--){k=m[l];k.el._drag={};if(k.end){k.end.call(k.el);}}i.drags=[];};h.drag=function(l,n,m){var k=this;k._drag={};k.on("mousedown",function(r){var q=this;(r.originalEvent||r).preventDefault();q._drag.x=r.clientX;q._drag.y=r.clientY;q._drag.id=r.identifier;if(n){n.call(q,r.clientX,r.clientY);}if(!i.drags.length){var o=a._getEventType("mousemove");var p=a._getEventType("mouseup");i._dragMoveHandle=b.on(o,i.dragMove,c,a._getEventConfig(o,"mousemove"));i._dragUpHandle=b.on(p,i.dragUp,c,a._getEventConfig(p,"mouseup"));}i.drags.push({el:this,move:l,end:m});});return k;};h.undrag=function(l,p,o){var k=this;var n=i.drags;var m=n.length;while(m--){n[m].el==k&&(n[m].move==l&&n[m].end==o)&&n.splice(m,1);if(!n.length){i._dragMoveHandle.detach();i._dragUpHandle.detach();}}};d.Set.addMethod(["drag","undrag"]);},"@VERSION@",{requires:["aui-drawing-base","event-gestures"]});AUI.add("aui-drawing-fonts",function(d){var j=d.Lang,c=j.isString,g=d.Drawing,n=g.prototype,k=function(o){return e[o]||"M";},e={l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"},i={bold:700,bolder:800,lighter:300,normal:400},m=Math,f=m.max,b=m.min,a=/[mlcxtrv]/g,h=g.REGEX_SEPARATOR,l=g.STR_EMPTY;g.registerFont=function(p){if(!p.face){return p;}this.fonts=this.fonts||{};var y=this.fonts;var w={w:p.w,face:{},glyphs:{}};var r=p.face["font-family"];var t=p.face;var v=w.face;for(var o in t){if(t.hasOwnProperty(o)){v[o]=t[o];}}if(y[r]){y[r].push(w);}else{y[r]=[w];}if(!p.svg){v["units-per-em"]=parseInt(t["units-per-em"],10);for(var u in p.glyphs){if(p.glyphs.hasOwnProperty(u)){var x=p.glyphs[u];var s=x.d;if(s){s=s.replace(a,k);s="M"+s+"z";}w.glyphs[u]={w:x.w,k:{},d:s};if(x.k){for(var q in x.k){if(x.hasOwnProperty(q)){w.glyphs[u].k[q]=x.k[q];}}}}}}return p;};n.getFont=function(w,x,p,r){var z=this;r=r||"normal";p=p||"normal";x=+x||i[x]||400;if(!g.fonts){return;}var A=g.fonts;var t=A[w];if(!t){var q=new RegExp("(^|\\s)"+w.replace(/[^\w\d\s+!~.:_-]/g,l)+"(\\s|$)","i");for(var o in A){if(A.hasOwnProperty(o)){if(q.test(o)){t=A[o];break;}}}}var u;if(t){var y;for(var v=0,s=t.length;v<s;v++){u=t[v];y=u.face;if(y["font-weight"]==x&&(y["font-style"]==p||!y["font-style"])&&y["font-stretch"]==r){break;}}}return u;};n.print=function(s,r,o,v,w,I,t){var G=this;I=I||"middle";t=f(b(t||0,1),-1);var D=G.createSet();var H=String(o).split(l);var E=0;var B=l;var J;c(v)&&(v=G.getFont(v));if(v){J=(w||16)/v.face["units-per-em"];var q=v.face.bbox.split(h);var u=+q[0];var z=+q[1]+(I=="baseline"?q[3]-q[1]+(+v.face.descent):(q[3]-q[1])/2);for(var C=0,p=H.length;C<p;C++){var A=C&&v.glyphs[H[C-1]]||{};var F=v.glyphs[H[C]];E+=C?(A.w||v.w)+(A.k&&A.k[H[C]]||0)+(v.w*t):0;F&&F.d&&D.push(G.path(F.d).attr({fill:"#000",stroke:"none",translation:[E,0]}));}D.scale(J,J,u,z).translate(s-u,r-z);}return D;};},"@VERSION@",{requires:["aui-drawing-base"]});AUI.add("aui-drawing-safari",function(a){a.Drawing.prototype.safari=function(){var b=this;var c=b.rect(-99,-99,b.get("width")+99,b.get("height")+99).attr({stroke:"none"});setTimeout(function(){c.remove();},0);};},"@VERSION@",{requires:["aui-drawing-base"],condition:{name:"aui-drawing-safari",trigger:"aui-drawing-base",test:function(a){var b=a.UA;return b.safari&&(b.version.major<4||(b.iphone||b.ipad));}}});AUI.add("aui-drawing",function(a){},"@VERSION@",{skinnable:false,use:["aui-drawing-base","aui-drawing-animate","aui-drawing-drag","aui-drawing-fonts"]});