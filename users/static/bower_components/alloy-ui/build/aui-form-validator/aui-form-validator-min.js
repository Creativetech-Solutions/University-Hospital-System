AUI.add("aui-form-validator",function(r){var an=r.Lang,y=r.Object,N=an.isBoolean,G=an.isDate,w=y.isEmpty,s=an.isFunction,Y=an.isObject,n=an.isString,d=an.trim,V=r.DOM._getRegExp,p="form-validator",E=".",C="",x="input,select,textarea,button",c="Invalid Date",H="|",m="blur",M="errorField",aa="input",F="submitError",k="validateField",B="validField",am="aria-required",ai="boundingBox",i="checkbox",g="container",ag="containerErrorClass",R="containerValidClass",P="error",aj="errorClass",al="extractRules",q="field",ae="fieldContainer",X="fieldStrings",ah="focus",W="message",b="messageContainer",O="name",U="radio",o="rules",Z="selectText",ad="showAllMessages",z="showMessages",L="stack",l="stackErrorContainer",a="strings",f="submit",t="type",ac="valid",T="validClass",D="validateOnBlur",S="validateOnInput",j=r.getClassName,ak=j(p,P),v=j(p,P,g),h=j(p,ac),ab=j(p,ac,g),I=j(q),e=j(p,W),u=j(p,L,P),af='<div class="'+e+'" role="alert"></div>',Q='<label class="'+u+'"></label>';YUI.AUI.defaults.FormValidator={STRINGS:{DEFAULT:"Please fix this field.",acceptFiles:"Please enter a value with a valid extension ({0}).",alpha:"Please enter only alpha characters.",alphanum:"Please enter only alphanumeric characters.",date:"Please enter a valid date.",digits:"Please enter only digits.",email:"Please enter a valid email address.",equalTo:"Please enter the same value again.",iri:"Please enter a valid IRI.",max:"Please enter a value less than or equal to {0}.",maxLength:"Please enter no more than {0} characters.",min:"Please enter a value greater than or equal to {0}.",minLength:"Please enter at least {0} characters.",number:"Please enter a valid number.",range:"Please enter a value between {0} and {1}.",rangeLength:"Please enter a value between {0} and {1} characters long.",required:"This field is required.",url:"Please enter a valid URL."},REGEX:{alpha:/^[a-z_]+$/i,alphanum:/^\w+$/,digits:/^\d+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,iri:/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+\-]?(\d+([.,]\d+)?)+$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},RULES:{acceptFiles:function(aq,ap,ar){var ao=null;if(n(ar)){var A=ar.replace(/\./g,"").split(/,\s*|\b\s*/);A=r.Array.map(A,r.Escape.regex);ao=V("[.]("+A.join(H)+")$","i");}return ao&&ao.test(aq);},date:function(ap,ao,aq){var A=new Date(ap);return(G(A)&&(A!==c)&&!isNaN(A));},equalTo:function(ap,ao,aq){var A=r.one(aq);return A&&(d(A.val())===ap);},max:function(ao,A,ap){return(an.toFloat(ao)<=ap);},maxLength:function(ao,A,ap){return(ao.length<=ap);},min:function(ao,A,ap){return(an.toFloat(ao)>=ap);},minLength:function(ao,A,ap){return(ao.length>=ap);},range:function(ap,ao,aq){var A=an.toFloat(ap);return(A>=aq[0])&&(A<=aq[1]);
},rangeLength:function(ap,ao,aq){var A=ap.length;return(A>=aq[0])&&(A<=aq[1]);},required:function(ar,ap,at){var A=this;if(r.FormValidator.isCheckable(ap)){var ao=ap.get(O),aq=r.all(A.getFieldsByName(ao));return(aq.filter(":checked").size()>0);}else{return !!ar;}}}};var K=YUI.AUI.defaults.FormValidator;var J=r.Component.create({NAME:p,ATTRS:{boundingBox:{setter:r.one},containerErrorClass:{value:v,validator:n},containerValidClass:{value:ab,validator:n},errorClass:{value:ak,validator:n},extractRules:{value:true,validator:N},fieldContainer:{value:E+I},fieldStrings:{value:{},validator:Y},messageContainer:{getter:function(A){return r.Node.create(A).clone();},value:af},strings:{valueFn:function(){return K.STRINGS;}},rules:{getter:function(ao){var A=this;if(!A._rulesAlreadyExtracted){A._extractRulesFromMarkup(ao);}return ao;},validator:Y,value:{}},selectText:{value:true,validator:N},showMessages:{value:true,validator:N},showAllMessages:{value:false,validator:N},stackErrorContainer:{getter:function(A){return r.Node.create(A).clone();},value:Q},validateOnBlur:{value:true,validator:N},validateOnInput:{value:false,validator:N},validClass:{value:h,validator:n}},isCheckable:function(ao){var A=ao.get(t).toLowerCase();return(A===i||A===U);},EXTENDS:r.Base,prototype:{initializer:function(){var A=this;A.errors={};A._blurHandlers=null;A._inputHandlers=null;A._rulesAlreadyExtracted=false;A._stackErrorContainers={};A.bindUI();A._uiSetValidateOnBlur(A.get(D));A._uiSetValidateOnInput(A.get(S));},bindUI:function(){var A=this,ao=A.get(ai);var ap=ao.delegate(ah,function(aq){A._setARIARoles();ap.detach();},x);A.publish({errorField:{defaultFn:A._defErrorFieldFn},validField:{defaultFn:A._defValidFieldFn},validateField:{defaultFn:A._defValidateFieldFn}});ao.on({reset:r.bind(A._onFormReset,A),submit:r.bind(A._onFormSubmit,A)});A.after("extractRulesChange",A._afterExtractRulesChange);A.after("validateOnBlurChange",A._afterValidateOnBlurChange);A.after("validateOnInputChange",A._afterValidateOnInputChange);},addFieldError:function(aq,ap){var A=this,ar=A.errors,ao=aq.get(O);if(!ar[ao]){ar[ao]=[];}ar[ao].push(ap);},clearFieldError:function(ao){var A=this;delete A.errors[ao.get(O)];},eachRule:function(ao){var A=this;r.each(A.get(o),function(ap,aq){if(s(ao)){ao.apply(A,[ap,aq]);}});},findFieldContainer:function(ao){var A=this,ap=A.get(ae);if(ap){return ao.ancestor(ap);}},focusInvalidField:function(){var A=this,ao=A.get(ai),ap=ao.one(E+ak);if(ap){if(A.get(Z)){ap.selectText();}ap.focus();}},getField:function(ao){var A=this;if(n(ao)){ao=A.getFieldsByName(ao);if(ao.length){ao=ao[0];}}return r.one(ao);},getFieldsByName:function(ap){var A=this,ao=A.get(ai).getDOM();return ao.elements[ap];},getFieldError:function(ao){var A=this;return A.errors[ao.get(O)];},getFieldStackErrorContainer:function(aq){var A=this,ao=aq.get(O),ap=A._stackErrorContainers;if(!ap[ao]){ap[ao]=A.get(l);}return ap[ao];},getFieldErrorMessage:function(at,ar){var au=this,aw=at.get(O),ao=au.get(X)[aw]||{},A=au.get(o)[aw],av=au.get(a),aq={};if(ar in A){var ap=r.Array(A[ar]);r.each(ap,function(az,ay){aq[ay]=[az].join(C);});}var ax=(ao[ar]||av[ar]||av.DEFAULT);return an.sub(ax,aq);},hasErrors:function(){var A=this;return !w(A.errors);},highlight:function(ap,ao){var A=this,aq=A.findFieldContainer(ap);A._highlightHelper(ap,A.get(aj),A.get(T),ao);A._highlightHelper(aq,A.get(ag),A.get(R),ao);},normalizeRuleValue:function(ao){var A=this;return s(ao)?ao.apply(A):ao;},unhighlight:function(ao){var A=this;A.highlight(ao,true);},printStackError:function(ap,ao,aq){var A=this;if(!A.get(ad)){aq=aq.slice(0,1);}ao.empty();r.each(aq,function(at,ar){var au=A.getFieldErrorMessage(ap,at),av=A.get(b).addClass(at);ao.append(av.html(au));});},resetAllFields:function(){var A=this;A.eachRule(function(ap,aq){var ao=A.getField(aq);A.resetField(ao);});},resetField:function(ap){var A=this,ao=A.getFieldStackErrorContainer(ap);ao.remove();A.resetFieldCss(ap);A.clearFieldError(ap);},resetFieldCss:function(ap){var ao=this,aq=ao.findFieldContainer(ap);var A=function(at,ar){if(at){r.each(ar,function(au){at.removeClass(ao.get(au));});}};A(ap,[T,aj]);A(aq,[R,ag]);},validatable:function(ap){var A=this,ao=false,ar=A.get(o)[ap.get(O)];if(ar){var aq=A.normalizeRuleValue(ar.required);ao=(aq||(!aq&&K.RULES.required.apply(A,[ap.val(),ap]))||ar.custom);}return !!ao;},validate:function(){var A=this;A.eachRule(function(ao,ap){A.validateField(ap);});A.focusInvalidField();},validateField:function(aq){var A=this,ap=A.getField(aq);if(ap){var ao=A.validatable(ap);A.resetField(ap);if(ao){A.fire(k,{validator:{field:ap}});}}},_afterExtractRulesChange:function(ao){var A=this;A._uiSetExtractRules(ao.newVal);},_afterValidateOnInputChange:function(ao){var A=this;A._uiSetValidateOnInput(ao.newVal);},_afterValidateOnBlurChange:function(ao){var A=this;A._uiSetValidateOnBlur(ao.newVal);},_defErrorFieldFn:function(aq){var A=this;var ao=aq.validator;var ar=ao.field;A.highlight(ar);if(A.get(z)){var ap=A.getFieldStackErrorContainer(ar);ar.placeBefore(ap);A.printStackError(ar,ap,ao.errors);}},_defValidFieldFn:function(ao){var A=this;var ap=ao.validator.field;A.unhighlight(ap);},_defValidateFieldFn:function(ap){var ao=this;var aq=ap.validator.field;var ar=ao.get(o)[aq.get(O)];r.each(ar,function(aw,au){var av=K.RULES[au];var at=d(aq.val());aw=ao.normalizeRuleValue(aw);if(s(av)&&!av.apply(ao,[at,aq,aw])){ao.addFieldError(aq,au);}});var A=ao.getFieldError(aq);if(A){ao.fire(M,{validator:{field:aq,errors:A}});}else{ao.fire(B,{validator:{field:aq}});}},_highlightHelper:function(aq,A,ao,ap){if(aq){if(ap){aq.removeClass(A).addClass(ao);}else{aq.removeClass(ao).addClass(A);}}},_extractRulesFromMarkup:function(aD){var aB=this,aw=aB.get(ai).getDOM(),ao=aw.elements,av=y.keys(K.RULES),aA=av.join("|"),az=V("aui-field-("+aA+")","g"),au,aq,aE=[],A=function(aG,aF){aE.push(aF);};for(au=0,aq=ao.length;au<aq;au++){var ap=ao[au],aC=ap.name;ap.className.replace(az,A);if(aE.length){var ar=aD[aC],at,ax;if(!ar){ar={};aD[aC]=ar;}for(at=0,ax=aE.length;at<ax;at++){var ay=aE[at];
if(!(ay in ar)){ar[ay]=true;}}aE.length=0;}}aB._rulesAlreadyExtracted=true;},_onFieldInput:function(ao){var A=this;A.validateField(ao.target);},_onFormSubmit:function(ao){var A=this;var ap={validator:{formEvent:ao}};A.validate();if(A.hasErrors()){ap.validator.errors=A.errors;A.fire(F,ap);ao.halt();}else{A.fire(f,ap);}},_onFormReset:function(ao){var A=this;A.resetAllFields();},_setARIARoles:function(){var A=this;A.eachRule(function(ap,aq){if(ap.required){var ao=A.getField(aq);if(ao&&!ao.attr(am)){ao.attr(am,true);}}});},_uiSetExtractRules:function(ao){var A=this;if(ao){A._extractRulesFromMarkup(A.get(o));}},_uiSetValidateOnInput:function(ap){var A=this,ao=A.get(ai);if(!A._inputHandlers){A._inputHandlers=ao.delegate(aa,A._onFieldInput,x,A);}},_uiSetValidateOnBlur:function(ap){var A=this,ao=A.get(ai);if(!A._blurHandlers){A._blurHandlers=ao.delegate(m,A._onFieldInput,x,A);}}}});r.each(K.REGEX,function(ao,A){K.RULES[A]=function(aq,ap,ar){return K.REGEX[A].test(aq);};});r.FormValidator=J;},"@VERSION@",{skinnable:false,requires:["aui-base","aui-event-input","escape","selector-css3"]});