AUI.add("aui-editor-toolbar-plugin",function(R){var x=R.Lang,T=x.isFunction,s=R.ClassNameManager.getClassName,c="editortoolbar",v="toolbar",V="alignment",e="content",O="font",q="indent",K="input",g="insert",b="insertimage",h="list",r="mouseout",W="select",C="source",M="styles",n="subscript",m="text",o={insertimage:true,source:true,styles:true},P=s("button","holder"),F=s("field","label"),S=s("field","label","secondary"),Q=s("field",K),X=s("field",K,"text"),w=s("field",K,"numeric"),B=s(c,W,"fontname"),p=s(c,W,"fontsize"),G=s(c,C,"textarea"),D=s("state","active"),I=s(c),Y=s(c,e),j=s(c,b,e),L=s(c,b,e,"target"),l=s(c,b,e,"align"),H="<select>"+'<option value="">none</option>'+'<option value="1px solid">1px</option>'+'<option value="2px solid">2px</option>'+'<option value="3px solid">3px</option>'+'<option value="4px solid">4px</option>'+'<option value="5px solid">5px</option>'+"</select>",N="<a></a>",a="<img />",E='<textarea class="'+G+'"></textarea>',u='<div class="'+I+'"><div class="'+Y+'"></div></div>',t='<select class="'+B+'">{0}</select>',U='<option selected="selected"></option>'+"<option>Arial</option>"+"<option>Arial Black</option>"+"<option>Comic Sans MS</option>"+"<option>Courier New</option>"+"<option>Lucida Console</option>"+"<option>Tahoma</option>"+"<option>Times New Roman</option>"+"<option>Trebuchet MS</option>"+"<option>Verdana</option>",k='<select class="'+p+'">{0}</select>',d='<option selected="selected"></option>'+'<option value="1">10</option>'+'<option value="2">13</option>'+'<option value="3">16</option>'+'<option value="4">18</option>'+'<option value="5">24</option>'+'<option value="6">32</option>'+'<option value="7">48</option>';function y(A){return f(A)+'<input type="text" class="'+Q+" "+X+'" />';}function J(){return'<input type="text" class="'+Q+" "+X+" "+w+'" />';}function f(z,A){return'<label class="'+F+(A?" "+A:"")+'">'+z+"</label>";}GROUPS=[];GROUPS[V]={children:[{icon:"justifyleft"},{icon:"justifycenter"},{icon:"justifyright"}]};GROUPS[O]={children:[{icon:"fontname",select:true},{icon:"fontsize",select:true}],generate:{init:function(AB,AA){var A=this;var z=AA.contentBox;R.delegate("change",function(AE){var AC=this;var AG=AE.currentTarget,AD=AG.get("className"),AF=AD.substring(AD.lastIndexOf("-")+1),AH=AG.get("value");AB.execCommand(AF,AH);AB.focus();},z,"select");AB.after("nodeChange",function(AD){var AC=this;switch(AD.changedType){case"keyup":case"mousedown":AC._updateToolbar(AD,AA);break;}},A);},fontname:function(AE,AD,AC){var A=this;var z=AD.contentBox;var AB=null;if(AC&&AC.optionHtml){AB=x.sub(t,[AC.optionHtml]);}else{AB=x.sub(t,[U]);}z.append(AB);var AA=z.all("."+B+" option");AD._fontNameOptions=AA;},fontsize:function(AE,AD,AC){var A=this;var z=AD.contentBox;var AB=null;if(AC&&AC.optionHtml){AB=x.sub(k,[AC.optionHtml]);}else{AB=x.sub(k,[d]);}z.append(AB);var AA=z.all("."+p+" option");AD._fontSizeOptions=AA;}}};GROUPS[q]={children:[{icon:"indent"},{icon:"outdent"}]};GROUPS[g]={children:[{icon:"insertimage"},{icon:"createlink"}],generate:{insertimage:function(AF,AK,z){var AL=this;var AE=AK.button,AB=AE.get("boundingBox");var AC=new R.OverlayContext(R.merge({trigger:AB,showOn:"click",hideOn:"click",align:{node:AB,points:["tl","bl"]}},z)).render();var AI=AC.get("contentBox");if(z&&z.databrowser){z.databrowser.render(AI);}else{var A=AF.getInstance(),AA=AF.frame._iframe,AJ=null;var AG=R.Node.create(i);AI.append(AG);var AM=AG.one("."+L+" input");var AH=new R.Toolbar({children:[{icon:"circle-close",label:Z.STRINGS.CANCEL},{icon:"circle-check",label:Z.STRINGS.INSERT}]});AH.item(0).on("click",function(AO){var AN=this;AC.hide();},AL);AH.item(1).on("click",function(AR){var AN=this;var AP=R.Node.create(N);var AO=R.Node.create(a);var AQ=null;AG.all("input").each(function(AV,AT){switch(AT){case 0:AO.attr("src",AV.val());break;case 1:var AU=parseInt(AV.val());if(!isNaN(AU)){AO.attr("width",AU);}break;case 2:var AS=parseInt(AV.val());if(!isNaN(AS)){AO.attr("height",AS);}break;case 3:var AW=parseInt(AV.val());if(!isNaN(AW)){AO.setStyle("padding",AW+"px");}break;case 4:AO.attr("title",AV.val());AO.attr("alt",AV.val());break;case 5:AQ=AV.val();break;}});AG.all("select").each(function(AT,AS){switch(AS){case 0:AO.setStyle("border",AT.val());break;}});AD.some(function(AU,AT){var AS=this;var AV=AU.StateInteraction.get("active");if(AV){AO.setStyle("display","");switch(AT){case 0:AO.attr("align","left");break;case 1:AO.attr("align","");break;case 2:AO.attr("align","center");AO.setStyle("display","block");break;case 3:AO.attr("align","right");break;}return true;}});if(AQ!=null){AP.attr("href",AQ);if(AM.attr("checked")){AP.attr("target","_blank");}AP.append(AO);AO=AP;}if(AJ&&AJ.anchorNode){AJ.anchorNode.append(AO);}AC.hide();},AL);AH.render(AG.one("."+P));var AD=new R.Toolbar({activeState:true,children:[{icon:"align-left",title:Z.STRINGS.ALIGN_LEFT},{icon:"align-inline",title:Z.STRINGS.ALIGN_INLINE},{icon:"align-block",title:Z.STRINGS.ALIGN_BLOCK},{icon:"align-right",title:Z.STRINGS.ALIGN_RIGHT}]});AD.on("buttonitem:click",function(AP){var AN=this;var AO=AP.target;AN.each(function(AR){var AQ=this;if(AR!=AO){AR.StateInteraction.set("active",false);}});});AD.render(AG.one("."+l));AC.on("hide",function(AO){var AN=this;AN.all("input").each(function(AP){AP.val("");});AN.all("select").each(function(AP){AP.attr("selectedIndex",0);});AD.each(function(AQ){var AP=this;AQ.StateInteraction.set("active",false);});AM.attr("checked",false);},AG);AA.on(r,function(AO){var AN=this;var AP=AN.getInstance();AJ=new AP.Selection();},AF);}},createlink:function(AB,AA,z){var A=this;AB.plug(R.Plugin.CreateLinkBase);}}};GROUPS[h]={children:[{icon:"insertunorderedlist"},{icon:"insertorderedlist"}],generate:{init:function(z){var A=this;z.plug(R.Plugin.EditorLists);}}};GROUPS[C]={children:[{icon:"source"}],generate:{source:function(AC,AF,AA){var AG=this;var z=AC.frame,A=z.get("container"),AD=AF.contentBox;var AE=R.Node.create(E);AE.hide();A.append(AE);var AB=AF.button;AB._visible=false;AB.on("click",function(AK){var AH=this;
if(AB._visible){AC.set("content",AE.val());AE.hide();AE.val("");z.show();}else{var AJ=z._iframe;AE.val(AC.getContent());var AI=(AJ.get("offsetHeight")-parseInt(AE.getComputedStyle("paddingTop"))-parseInt(AE.getComputedStyle("paddingBottom")));AE.setStyle("height",AI+"px");z.hide();AE.show();}AB._visible=!AB._visible;AD.all("select").attr("disabled",AB._visible);AD.all("button").attr("disabled",AB._visible);AB.get("contentBox").attr("disabled",false);},AC);}}},GROUPS[M]={children:[{icon:"styles"}],generate:{styles:function(AC,AA,z){var A=this;var AB=AA.button;boundingBox=AB.get("boundingBox");AC.plug(R.Plugin.EditorMenuPlugin);AC.menu.add(R.merge({trigger:boundingBox,showOn:"click",hideOn:"click",align:{node:boundingBox,points:["tl","bl"]}},z));}}};GROUPS[n]={children:[{icon:"subscript"},{icon:"superscript"}]};GROUPS[m]={children:[{icon:"bold"},{icon:"italic"},{icon:"underline"},{icon:"strikethrough"}]};var Z=R.Component.create({NAME:c,NS:v,EXTENDS:R.Plugin.Base,ATTRS:{groups:{value:[{type:m},{type:V},{type:q},{type:h}]}},prototype:{initializer:function(){var AM=this;var AO=AM.get("host"),A=AO.frame.get("container"),AB=AM.get("groups");var AD=R.Node.create(u),AG=AD.one("."+Y);A.placeBefore(AD);var AL={boundingBox:AD,contentBox:AG};var AN=[];for(var AE=0;AE<AB.length;AE++){var AK=AB[AE],AF=GROUPS[AK.type];var z=[];for(var AC=0;AC<AF.children.length;AC++){if(!AF.children[AC].select){z.push(AF.children[AC]);}}if(z.length>0){var AJ=new R.Toolbar(R.merge({activeState:true},AK.toolbar,{children:z})).render(AG);AJ.on("buttonitem:click",function(AR){var AQ=this;var AP=AR.target.get("icon").split("-");if(!o[AP[0]]){AQ.execCommand(AP[0],(AP[1]?AP[1]:""));AQ.focus();}},AO);AN.push(AJ);}var AI=AF.generate;if(AI&&T(AI.init)){AI.init.call(AM,AO,AL);}for(var AC=0;AC<AF.children.length;AC++){var AH=AF.children[AC].icon;if(AI&&T(AI[AH])){var AA=(AK.config?AK.config[AH]:null);AL.button=(AI[AH].select?null:AJ.item(AC));AI[AH].call(AM,AO,AL,AA);}}}AL.toolbars=AN;},_updateToolbar:function(A,AD){var AF=this;if(A.changedNode){var AA=A.commands,AG=AD.toolbars;if(AG){for(var AC=0;AC<AG.length;AC++){AG[AC].each(function(AI){var AJ=false;if(AA[AI.get("icon")]){AJ=true;}AI.StateInteraction.set("active",AJ);});}}var z=A.fontFamily,AE=AD._fontNameOptions,AH=A.fontSize,AB=AD._fontSizeOptions;if(AE){AE.item(0).set("selected",true);AE.each(function(AI){var AJ=AI.get("value").toLowerCase();if(AJ===z.toLowerCase()){AI.set("selected",true);}});}if(AB){AH=AH.replace("px","");AB.item(0).set("selected",true);AB.each(function(AJ){var AK=AJ.get("value").toLowerCase(),AI=AJ.get("text");if(AI===AH){AJ.set("selected",true);}});}}}}});Z.STRINGS={ALIGN:"Align",ALIGN_BLOCK:"Block",ALIGN_LEFT:"Left",ALIGN_INLINE:"Inline",ALIGN_RIGHT:"Right",BORDER:"Border",CANCEL:"Cancel",DESCRIPTION:"Description",IMAGE_URL:"Image URL",INSERT:"Insert",LINK_URL:"Link URL",OPEN_IN_NEW_WINDOW:"Open in new window",PADDING:"Padding",SIZE:"Size"};var i='<div class="'+j+'">'+"<ul>"+"<li>"+y(Z.STRINGS.IMAGE_URL)+"</li>"+"<li>"+f(Z.STRINGS.SIZE)+J()+"<span>x</span>"+J()+"</li>"+"<li>"+f(Z.STRINGS.PADDING)+J()+f(Z.STRINGS.BORDER,S)+H+"</li>"+"<li>"+f(Z.STRINGS.ALIGN)+'<div class="'+l+'"></div>'+"</li>"+"<li>"+y(Z.STRINGS.DESCRIPTION)+"</li>"+"<li>"+y(Z.STRINGS.LINK_URL)+"</li>"+"</ul>"+'<span class="'+L+'"><input type="checkbox" /><label>'+Z.STRINGS.OPEN_IN_NEW_WINDOW+"</label></span>"+'<div class="'+P+'"></div>'+"</div>";R.namespace("Plugin").EditorToolbarPlugin=Z;},"@VERSION@",{requires:["aui-base","editor-base","aui-toolbar","aui-overlay-context","aui-editor-menu-plugin","aui-editor-tools-plugin","aui-button-item","createlink-base","editor-lists","plugin"]});