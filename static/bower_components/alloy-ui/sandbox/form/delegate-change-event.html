<!DOCTYPE html>

<html>
<head>
	<script src="../../build/aui/aui.js" type="text/javascript"></script>

	<link rel="stylesheet" href="../../build/aui-skin-classic/css/aui-skin-classic-all-min.css" type="text/css" media="screen" />

	<style type="text/css" media="screen">
		body {
			font-size: 12px;
		}

		#wrapper {
			margin: 20px auto;
			width: 960px;
		}

		/* ---------- Custom form css ---------- */
		.aui-field-content {
			display: block;
			clear: both;
			border-bottom: 1px solid #dfdfdf;
			padding: 7px 0;
		}

		.aui-field-last .aui-field-content {
			display: block;
			clear: both;
			border-bottom-width: 0;
			padding: 7px 0;
		}

		.aui-field-choice .aui-field-content {
			padding: 0 0 10px;
			border-bottom-width: 0;
		}


		.aui-fieldset-legend {
			padding-bottom: 1em;
		}

		.aui-button-row {
			padding: 5px;
			background: #eee;
			border-top: 1px solid #ccc;
		}

		.aui-button-input {
			background-color: #f5f5f5;
			border: 1px solid #dedede;
			border-top-color: #eee;
			border-left-color: #eee;
			color: #565656;
		}

		.aui-button-input:hover {
			border: 1px solid #c2e1ef;
			background-color: #dff4ff;
			color: #369;
		}

		.aui-button-input:active {
			border: 1px solid #6299c5;
			background-color: #6299c5;
			color: #fff;
		}

		.aui-state-positive .aui-button-input {
			color: #529214;
		}

		.aui-state-positive .aui-button-input:hover {
			background-color: #e6efc2;
			border-color: #c6d880;
		}

		.aui-state-positive .aui-button-input:active {
			background-color: #529214;
			border-color: #529214;
			color: #fff;
		}

		.aui-state-negative .aui-button-input {
			color: #d12f19;
		}

		.aui-state-negative .aui-button-input:hover {
			background-color: #fbe3e4;
			border-color: #fbc2c4;
			color: #d12f19;
		}

		.aui-state-negative .aui-button-input:active {
			background-color: #d12f19;
			border-color: #d12f19;
			color: #fff;
		}

	</style>
</head>

<body class="yui3-skin-sam">
<div id="wrapper">
	<h1>Alloy - Delegated change event demo</h1>

	<a href="javascript:;" id="refreshAttach">Detach existing delegate change events and attach a new one</a>

	<div id="demo">
		<form class="aui-layout-content aui-form" id="myForm" action="">

			<div class="aui-fieldset aui-w33 aui-column aui-column-first">
				<div class="aui-fieldset-content aui-column-content aui-column-content-first">
					<div class="aui-fieldset-legend aui-widget-hd">
						Top aligned labels
					</div>

					<div class="aui-fieldset-bd aui-widget-bd">
						<span class="aui-field aui-field-text aui-field-first">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textField">Text</label>
								<input class="aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-password">
							<span class="aui-field-content">
								<label class="aui-field-label" for="passwordField">Password</label>
								<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-password</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select">
							<span class="aui-field-content">
								<label class="aui-field-label" for="menuField">Select (Menu)</label>
								<select class="aui-field-input aui-field-input-select" id="menuField" name="menuField">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
							<span class="aui-field-content">
								<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
								<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple" id="multipleMenuField" name="multipleMenuField" multiple="true">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select, .aui-field-select-multiple</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-textarea">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textareaField">Textarea</label>
								<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea" id="textareaField" name="textareaField"></textarea>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-textarea</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Checkboxes
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
											<span class="aui-field-content">
												<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1" name="checkbox1" type="checkbox" value="1" />

												<label class="aui-choice-label" for="checkbox1">
													Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2" name="checkbox2" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox2">
													Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3" name="checkbox3" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox3">
													Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Radio buttons
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio1" name="radio1" type="radio" value="1" />

												<label class="aui-choice-label"  for="radio1">
													Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio2" name="radio1" type="radio" value="2" />

												<label class="aui-choice-label" for="radio2">
													Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio3" name="radio1" type="radio" value="3" />

												<label class="aui-choice-label" for="radio3">
													Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>
					</div>

				</div>
			</div>

			<div class="aui-fieldset aui-w33 aui-column aui-field-labels-inline">
				<div class="aui-fieldset-content aui-column-content">
					<div class="aui-fieldset-legend aui-widget-hd">
						Inline labels, left aligned
					</div>

					<div class="aui-fieldset-bd aui-widget-bd">
						<span class="aui-field aui-field-text aui-field-first">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textField">Text</label>
								<input class="aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-password">
							<span class="aui-field-content">
								<label class="aui-field-label" for="passwordField">Password</label>
								<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-password</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select">
							<span class="aui-field-content">
								<label class="aui-field-label" for="menuField">Select (Menu)</label>
								<select class="aui-field-input aui-field-input-select" id="menuField" name="menuField">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
							<span class="aui-field-content">
								<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
								<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple" id="multipleMenuField" name="multipleMenuField" multiple="true">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select, .aui-field-select-multiple</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-textarea">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textareaField">Textarea</label>
								<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea" id="textareaField" name="textareaField"></textarea>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-textarea</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Checkboxes
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
											<span class="aui-field-content">
												<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1a" name="checkbox1a" type="checkbox" value="1" />

												<label class="aui-choice-label" for="checkbox1a">
													Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2a" name="checkbox2a" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox2a">
													Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3a" name="checkbox3a" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox3a">
													Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Radio buttons
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio1a" name="radio1a" type="radio" value="1" />
												<label class="aui-choice-label" for="radio1a">
													Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio2a" name="radio1a" type="radio" value="2" />
												<label class="aui-choice-label" for="radio2a">
													Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio3a" name="radio1a" type="radio" value="3" />
												<label class="aui-choice-label" for="radio3a">
													Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>
					</div>

				</div>
			</div>

			<div class="aui-fieldset aui-w33 aui-column aui-column-last aui-field-labels-inline aui-field-labels-right">
				<div class="aui-fieldset-content aui-column-content aui-column-content-last">
					<div class="aui-fieldset-legend aui-widget-hd">
						Inline labels, right aligned
					</div>

					<div class="aui-fieldset-bd aui-widget-bd">
						<span class="aui-field aui-field-text aui-field-first">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textField">Text</label>
								<input class="aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-password">
							<span class="aui-field-content">
								<label class="aui-field-label" for="passwordField">Password</label>
								<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-password</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select">
							<span class="aui-field-content">
								<label class="aui-field-label" for="menuField">Select (Menu)</label>
								<select class="aui-field-input aui-field-input-select" id="menuField" name="menuField">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
							<span class="aui-field-content">
								<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
								<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple" id="multipleMenuField" name="multipleMenuField" multiple="true">
									<option selected="selected" value="1">Menu Selection 1</option>
									<option value="2">Menu Selection 2</option>
									<option value="3">Menu Selection 3</option>
								</select>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-menu, .aui-field-select, .aui-field-select-multiple</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-text aui-field-textarea">
							<span class="aui-field-content">
								<label class="aui-field-label" for="textareaField">Textarea</label>
								<textarea class="aui-field-input aui-field-input-text aui-field-input-textarea" id="textareaField" name="textareaField"></textarea>
								<span class="aui-field-hint">
									<span>.aui-field, .aui-field-text, .aui-field-textarea</span>
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Checkboxes
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
											<span class="aui-field-content">
												<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1b" name="checkbox1b" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox1b">
													Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2b" name="checkbox2b" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox2b">
													Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-checkbox">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3b" name="checkbox3b" type="checkbox" value="1" />
												<label class="aui-choice-label" for="checkbox3b">
													Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>

						<span class="aui-field aui-field-nested aui-field-last">
							<span class="aui-field-content">
								<span class="aui-field-label">
									Radio buttons
								</span>

								<span class="aui-field-group">
									<span class="aui-field-group-content">
										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio1b" name="radio1b" type="radio" value="1" />
												<label class="aui-choice-label" for="radio1b">
													Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio2b" name="radio1b" type="radio" value="2" />

												<label class="aui-choice-label" for="radio2b">
													Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>

										<span class="aui-field aui-field-choice aui-field-radio">
											<span class="aui-field-content">
												<input class="aui-field-input aui-field-input-choice aui-field-input-radio" id="radio3b" name="radio1b" type="radio" value="3" />

												<label class="aui-choice-label" for="radio3b">
													Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
												</label>
											</span>
										</span>
									</span>
								</span>

								<span class="aui-field-hint">
									.aui-field-nested, .aui-field-group
								</span>
							</span>
						</span>
					</div>

				</div>
			</div>

			<span class="aui-button-row aui-helper-clearfix">
				<span class="aui-button aui-button-submit aui-state-positive aui-priority-primary">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-submit" type="submit" value="Submit" />
					</span>
				</span>

				<span class="aui-button aui-button-reset aui-priority-secondary">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-reset" type="reset" value="Reset" />
					</span>
				</span>

				<span class="aui-button aui-button-cancel aui-state-negative">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-cancel" type="button" value="Cancel" />
					</span>
				</span>
			</span>
		</form>
	</div>
</div>

<script type="text/javascript" charset="utf-8">

AUI().ready(
	'aui-form-base',
	'console',
	function(A) {
		new A.Console().render();

		A.getBody().delegate(
			'change',
			function(event) {
				event.stopPropagation();
				A.log('Delegate Change Event #1: ' + event.target.guid() + ' - ' + event.currentTarget.guid() + ' - ' + event.target.val() + '---' + String(A.Lang.now()).slice(-4));
			},
			'.aui-field'
		);

		A.getBody().delegate(
			'change',
			function(event) {
				event.stopPropagation();
				A.log('Delegate Change Event #2: ' + event.target.guid() + ' - ' + event.currentTarget.guid() + ' - ' + event.target.val() + '---' + String(A.Lang.now()).slice(-4));
			},
			'.aui-field'
		);

		A.one('#refreshAttach').on(
			'click',
			function(event) {
				A.log('Refreshing attached change events.');

				A.getBody().detach('change');

				A.getBody().delegate(
					'change',
					function(event) {
						A.log('Delegate Change Event #3, the other two should not fire');
					},
					'.aui-field'
				);
			}
		);

		A.getBody().delegate(
			'submit',
			function(event) {
				A.log('Delegate Submit Event');
			},
			'form'
		);

		A.one('form').on(
			'submit',
			function(event) {
				event.preventDefault();

				A.log('Regular Submit Event');
			}
		);

		A.one('#checkbox1').on(
			'change',
			function(event) {
				A.log('change event to single checkbox');
			}
		);

		A.one('#textareaField').on(
			'change',
			function() {
				A.log('Direct Change event to a single textarea');
			}
		);

		A.one('#textField').on(
			'change',
			function(event) {
				A.log('Direct Change event to a single text field');
			}
		);

		A.one('#menuField').on(
			'change',
			function(event) {
				A.log('Direct Change event to a single select');
			}
		);
	}
);

</script>

</body>
</html>