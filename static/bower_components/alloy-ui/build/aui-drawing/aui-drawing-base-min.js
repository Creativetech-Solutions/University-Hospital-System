AUI.add("aui-drawing-base",function(n){var Q=n.Lang,s=Q.isArray,p=Q.isFunction,O=Q.isNumber,E=Q.isObject,i=Q.isString,q=Q.isUndefined,y=n.config.doc,w=n.ColorUtil,a,u=n.UA,F=Q.emptyFn,m={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://alloy.liferay.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"AlloyUI",translation:"0 0",width:0,x:0,y:0},P={Q:1,T:1},b={circle:1,ellipse:1,image:1,path:1,rect:1,text:1},B={image:1,text:1},r={circle:1,ellipse:1},L=Math,G=L.max,k=L.min,K=L.pow,x="drawing",t=/^([^:]*):?([\d\.]*)/,C=/^url\(['"]?([^\)]+?)['"]?\)$/i,o=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,h=/,?([achlmqrstvxz]),?/gi,f=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,J=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,N=/[, ]+/,j=/\s*\-\s*/,l="",D="fill",M=" progid:DXImageTransform.Microsoft",d=" ",I=String.prototype.toLowerCase,v=String.prototype.toUpperCase;var c=n.Component.create({ATTRS:{height:{value:342},width:{value:512},x:{value:null},y:{value:null}},UI_ATTRS:["x","y"],create:function(S){var R=arguments;var A=R[0];if(s(A)){R=R[0];S=a.getConfig(R);var W=new c(S).render();var X=W.createSet();var U;for(var T=0,V=R.length;T<V;T++){U=R[T]||{};if(b.hasOwnProperty(U.type)){X.push(W[U.type]().attr(U));}}return W;}else{if(E(A)&&!(A.nodeName||A instanceof n.Node)){S=A;}else{S=a.getConfig(R);}}return new c(S).render();},NAME:x,prototype:{CONTENT_TEMPLATE:null,renderUI:function(){var A=this;A.customAttributes={};c.Impl.createCanvas.call(A);},circle:function(R,T,S){var A=this;return c.Impl.createCircle.call(A,R||0,T||0,S||0);},clear:function(){var A=this;return c.Impl.clear.call(A);},createSet:function(R){var A=this;if(arguments.length>1){R=Array.prototype.splice.call(arguments,0,arguments.length);}return new e(R);},ellipse:function(R,U,T,S){var A=this;return c.Impl.createEllipse.call(A,R||0,U||0,T||0,S||0);},image:function(U,R,V,S,T){var A=this;return c.Impl.createImage.call(A,U||"about:blank",R||0,V||0,S||0,T||0);},path:function(R){var A=this;if(i(R)){R=Q.sub.apply(n,arguments);}else{if(!q(R)&&!s(R)){R+=l;}}return c.Impl.createPath.call(A,R);},rect:function(R,V,S,T,U){var A=this;return c.Impl.createRectangle.call(A,R||0,V||0,S||0,T||0,U||0);},remove:function(){var A=this;return c.Impl.remove.call(A);},safari:F,text:function(R,T,S){var A=this;return c.Impl.createText.call(A,R||0,T||0,S||l);},_uiSetX:function(R){var A=this;A.get("boundingBox").setXY([R,A.get("y")]);},_uiSetY:function(R){var A=this;A.get("boundingBox").setXY([A.get("x"),R]);}}});a={getConfig:function(U){var T={};var R=U[0];var A="boundingBox";var W=2;var V=1;var S=-1;if(O(R)){A="x";W=3;V=2;S=1;}T[A]=R;T.height=U[W];T.width=U[V];T.y=U[S];return T;},translate:function(A,S){if(A==null){return{x:this._.tx,y:this._.ty,toString:a.XYToString};}this._.tx+=+A;this._.ty+=+S;switch(this.type){case"circle":case"ellipse":this.attr({cx:+A+this.attrs.cx,cy:+S+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+A+this.attrs.x,y:+S+this.attrs.y});break;case"path":var R=a.pathToRelative(this.attrs.path);R[0][1]+=+A;R[0][2]+=+S;this.attr({path:R});break;}return this;}};c.getColor=function(R){var S=c.getColor.start=c.getColor.start||{h:0,s:1,b:R||0.75};var A=w.hsb2rgb(S.h,S.s,S.b);S.h+=0.075;if(S.h>1){S.h=0;S.s-=0.2;if(S.s<=0){c.getColor.start={h:0,s:1,b:S.b};}}return A.hex;};c.getColor.reset=function(){delete c.start;};a.tear=function(R,A){R==A.top&&(A.top=R.prev);R==A.bottom&&(A.bottom=R.next);R.next&&(R.next.prev=R.prev);R.prev&&(R.prev.next=R.next);};a.toFront=function(R,A){if(A.top===R){return;}a.tear(R,A);R.next=null;R.prev=A.top;A.top.next=R;A.top=R;};a.toBack=function(R,A){if(A.bottom===R){return;}a.tear(R,A);R.next=A.bottom;R.prev=null;A.bottom.prev=R;A.bottom=R;};a.insertAfter=function(S,R,A){a.tear(S,A);R==A.top&&(A.top=S);R.next&&(R.next.prev=S);S.next=R.next;S.prev=R;R.next=S;};a.insertBefore=function(S,R,A){a.tear(S,A);R==A.bottom&&(A.bottom=S);R.prev&&(R.prev.next=S);S.prev=R.prev;R.prev=S;S.next=R;};var g=function(S,R){var A=this;A.createElement.apply(A,arguments);};a.removed=function(A){return function(){throw new Error('AlloyUI: you are calling to method "'+A+'" of removed object');};};a._path2string=function(){return this.join(",").replace(h,"$1");};a.parsePathString=n.cached(function(A){if(!A){return null;}var S={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var R=[];if(s(A)&&s(A[0])){R=pathClone(A);}if(!R.length){String(A).replace(o,function(U,T,X){var W=[];var V=I.call(T);X.replace(f,function(Z,Y){Y&&W.push(+Y);});if(V=="m"&&W.length>2){R.push([T].concat(W.splice(0,2)));V="l";T=T=="m"?"l":"L";}while(W.length>=S[V]){R.push([T].concat(W.splice(0,S[V])));if(!S[V]){break;}}});}R.toString=a._path2string;return R;});a.findDotsAtSegment=function(R,A,ak,ai,W,U,Y,X,ae){var ac=1-ae;var ab=K(ac,3)*R+K(ac,2)*3*ae*ak+ac*3*ae*ae*W+K(ae,3)*Y;var Z=K(ac,3)*A+K(ac,2)*3*ae*ai+ac*3*ae*ae*U+K(ae,3)*X;var ag=R+2*ae*(ak-R)+ae*ae*(W-2*ak+R);var af=A+2*ae*(ai-A)+ae*ae*(U-2*ai+A);var aj=ak+2*ae*(W-ak)+ae*ae*(Y-2*W+ak);var ah=ai+2*ae*(U-ai)+ae*ae*(X-2*U+ai);var ad=(1-ae)*R+ae*ak;var aa=(1-ae)*A+ae*ai;var T=(1-ae)*W+ae*Y;var S=(1-ae)*U+ae*X;var V=(90-L.atan((ag-aj)/(af-ah))*180/L.PI);if(ag>aj||af<ah){V+=180;}return{x:ab,y:Z,m:{x:ag,y:af},n:{x:aj,y:ah},start:{x:ad,y:aa},end:{x:T,y:S},alpha:V};};a.pathDimensions=n.cached(function(ac){if(!ac){return{x:0,y:0,width:0,height:0};}ac=a.path2curve(ac);var aa=0;var Z=0;var T=[];var R=[];var S;for(var V=0,U=ac.length;V<U;V++){S=ac[V];if(S[0]=="M"){aa=S[1];Z=S[2];T.push(aa);R.push(Z);}else{var W=a.curveDim(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6]);T=T.concat(W.min.x,W.max.x);R=R.concat(W.min.y,W.max.y);aa=S[5];Z=S[6];}}var A=k.apply(0,T);
var ab=k.apply(0,R);return{x:A,y:ab,width:G.apply(0,T)-A,height:G.apply(0,R)-ab};});a.pathClone=function(V){var S=[];if(!s(V)||!s(V&&V[0])){V=a.parsePathString(V);}for(var R=0,U=V.length;R<U;R++){S[R]=[];for(var A=0,T=V[R].length;A<T;A++){S[R][A]=V[R][A];}}S.toString=a._path2string;return S;};a._pathToRelative=n.cached(function(T){if(!s(T)||!s(T&&T[0])){T=a.parsePathString(T);}var Z=[];var ac=0;var ab=0;var af=0;var ae=0;var R=0;if(T[0][0]=="M"){ac=T[0][1];ab=T[0][2];af=ac;ae=ab;R++;Z.push(["M",ac,ab]);}for(var X=R,S=T.length;X<S;X++){var A=Z[X]=[];var ad=T[X];if(ad[0]!=I.call(ad[0])){A[0]=I.call(ad[0]);switch(A[0]){case"a":A[1]=ad[1];A[2]=ad[2];A[3]=ad[3];A[4]=ad[4];A[5]=ad[5];A[6]=+(ad[6]-ac).toFixed(3);A[7]=+(ad[7]-ab).toFixed(3);break;case"v":A[1]=+(ad[1]-ab).toFixed(3);break;case"m":af=ad[1];ae=ad[2];default:for(var V=1,aa=ad.length;V<aa;V++){A[V]=+(ad[V]-((V%2)?ac:ab)).toFixed(3);}}}else{A=Z[X]=[];if(ad[0]=="m"){af=ad[1]+ac;ae=ad[2]+ab;}for(var U=0,W=ad.length;U<W;U++){Z[X][U]=ad[U];}}var Y=Z[X].length;switch(Z[X][0]){case"z":ac=af;ab=ae;break;case"h":ac+=+Z[X][Y-1];break;case"v":ab+=+Z[X][Y-1];break;default:ac+=+Z[X][Y-2];ab+=+Z[X][Y-1];}}Z.toString=a._path2string;return Z;});a.pathToRelative=function(A){return a.pathClone(a._pathToRelative(A));};a._pathToAbsolute=n.cached(function(T){if(!s(T)||!s(T&&T[0])){T=a.parsePathString(T);}var Y=[];var ab=0;var aa=0;var ae=0;var ad=0;var R=0;if(T[0][0]=="M"){ab=+T[0][1];aa=+T[0][2];ae=ab;ad=aa;R++;Y[0]=["M",ab,aa];}for(var X=R,S=T.length;X<S;X++){var A=Y[X]=[];var ac=T[X];if(ac[0]!=v.call(ac[0])){A[0]=v.call(ac[0]);switch(A[0]){case"A":A[1]=ac[1];A[2]=ac[2];A[3]=ac[3];A[4]=ac[4];A[5]=ac[5];A[6]=+(ac[6]+ab);A[7]=+(ac[7]+aa);break;case"V":A[1]=+ac[1]+aa;break;case"H":A[1]=+ac[1]+ab;break;case"M":ae=+ac[1]+ab;ad=+ac[2]+aa;default:for(var V=1,Z=ac.length;V<Z;V++){A[V]=+ac[V]+((V%2)?ab:aa);}}}else{for(var U=0,W=ac.length;U<W;U++){Y[X][U]=ac[U];}}switch(A[0]){case"Z":ab=ae;aa=ad;break;case"H":ab=A[1];break;case"V":aa=A[1];break;case"M":ae=Y[X][Y[X].length-2];ad=Y[X][Y[X].length-1];default:ab=Y[X][Y[X].length-2];aa=Y[X][Y[X].length-1];}}Y.toString=a._path2string;return Y;});a.pathToAbsolute=function(A){return a.pathClone(a._pathToAbsolute(A));};a.lineToCubicCurve=function(R,T,A,S){return[R,T,A,S,A,S];};a.quadraticToCubicCurve=function(R,T,W,U,A,S){var V=1/3;var X=2/3;return[V*R+X*W,V*T+X*U,V*A+X*W,V*S+X*U,A,S];};a.arcToCubicCurve=function(ae,aK,ao,am,ag,Z,U,ad,aJ,ah){var T=L.PI;var al=T*120/180;var A=T/180*(+ag||0);var ar=[];var ap;var aG=n.cached(function(aM,aP,aL){var aO=aM*L.cos(aL)-aP*L.sin(aL),aN=aM*L.sin(aL)+aP*L.cos(aL);return{x:aO,y:aN};});if(!ah){ap=aG(ae,aK,-A);ae=ap.x;aK=ap.y;ap=aG(ad,aJ,-A);ad=ap.x;aJ=ap.y;var R=L.cos(T/180*ag);var ab=L.sin(T/180*ag);var au=(ae-ad)/2;var at=(aK-aJ)/2;var aE=(au*au)/(ao*ao)+(at*at)/(am*am);if(aE>1){aE=L.sqrt(aE);ao=aE*ao;am=aE*am;}var S=ao*ao;var ax=am*am;var az=(Z==U?-1:1)*L.sqrt(L.abs((S*ax-S*at*at-ax*au*au)/(S*at*at+ax*au*au)));var aj=az*ao*at/am+(ae+ad)/2;var ai=az*-am*au/ao+(aK+aJ)/2;var Y=L.asin(((aK-ai)/am).toFixed(7));var X=L.asin(((aJ-ai)/am).toFixed(7));Y=ae<aj?T-Y:Y;X=ad<aj?T-X:X;Y<0&&(Y=T*2+Y);X<0&&(X=T*2+X);if(U&&Y>X){Y=Y-T*2;}if(!U&&X>Y){X=X-T*2;}}else{Y=ah[0];X=ah[1];aj=ah[2];ai=ah[3];}var ac=X-Y;if(L.abs(ac)>al){var ak=X;var an=ad;var aa=aJ;X=Y+al*(U&&X>Y?1:-1);ad=aj+ao*L.cos(X);aJ=ai+am*L.sin(X);ar=a.arcToCubicCurve(ad,aJ,ao,am,ag,0,U,an,aa,[X,ak,aj,ai]);}ac=X-Y;var W=L.cos(Y);var aI=L.sin(Y);var V=L.cos(X);var aH=L.sin(X);var av=L.tan(ac/4);var ay=4/3*ao*av;var aw=4/3*am*av;var aF=[ae,aK];var aD=[ae+ay*aI,aK-aw*W];var aC=[ad+ay*aH,aJ-aw*V];var aA=[ad,aJ];aD[0]=2*aF[0]-aD[0];aD[1]=2*aF[1]-aD[1];if(ah){return[aD,aC,aA].concat(ar);}else{ar=[aD,aC,aA].concat(ar).join().split(",");var aq=[];for(var aB=0,af=ar.length;aB<af;aB++){aq[aB]=aB%2?aG(ar[aB-1],ar[aB],A).y:aG(ar[aB],ar[aB+1],A).x;}return aq;}};a.findDotAtSegment=function(R,A,T,S,Y,X,W,V,Z){var U=1-Z;return{x:K(U,3)*R+K(U,2)*3*Z*T+U*3*Z*Z*Y+K(Z,3)*W,y:K(U,3)*A+K(U,2)*3*Z*S+U*3*Z*Z*X+K(Z,3)*V};};a.curveDim=n.cached(function(S,A,U,T,af,ae,ab,Y){var ad=(af-2*U+S)-(ab-2*af+U);var aa=2*(U-S)-2*(af-U);var X=S-U;var W=(-aa+L.sqrt(aa*aa-4*ad*X))/2/ad;var V=(-aa-L.sqrt(aa*aa-4*ad*X))/2/ad;var Z=[A,Y];var ac=[S,ab];var R;L.abs(W)>1000000000000&&(W=0.5);L.abs(V)>1000000000000&&(V=0.5);if(W>0&&W<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,W);ac.push(R.x);Z.push(R.y);}if(V>0&&V<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,V);ac.push(R.x);Z.push(R.y);}ad=(ae-2*T+A)-(Y-2*ae+T);aa=2*(T-A)-2*(ae-T);X=A-T;W=(-aa+L.sqrt(aa*aa-4*ad*X))/2/ad;V=(-aa-L.sqrt(aa*aa-4*ad*X))/2/ad;L.abs(W)>1000000000000&&(W=0.5);L.abs(V)>1000000000000&&(V=0.5);if(W>0&&W<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,W);ac.push(R.x);Z.push(R.y);}if(V>0&&V<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,V);ac.push(R.x);Z.push(R.y);}return{min:{x:k.apply(0,ac),y:k.apply(0,Z)},max:{x:G.apply(0,ac),y:G.apply(0,Z)}};});a._path2curve=n.cached(function(ae,aa){var T=a.pathToAbsolute(ae);var ab=aa&&a.pathToAbsolute(aa);var ac={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var W=function(ag,ah){var af;var ai;if(!ag){return["C",ah.x,ah.y,ah.x,ah.y,ah.x,ah.y];}if(!(ag[0] in P)){ah.qx=ah.qy=null;}switch(ag[0]){case"M":ah.X=ag[1];ah.Y=ag[2];break;case"A":ag=["C"].concat(a.arcToCubicCurve.apply(0,[ah.x,ah.y].concat(ag.slice(1))));break;case"S":af=ah.x+(ah.x-(ah.bx||ah.x));ai=ah.y+(ah.y-(ah.by||ah.y));ag=["C",af,ai].concat(ag.slice(1));break;case"T":ah.qx=ah.x+(ah.x-(ah.qx||ah.x));ah.qy=ah.y+(ah.y-(ah.qy||ah.y));ag=["C"].concat(a.quadraticToCubicCurve(ah.x,ah.y,ah.qx,ah.qy,ag[1],ag[2]));break;case"Q":ah.qx=ag[1];ah.qy=ag[2];ag=["C"].concat(a.quadraticToCubicCurve(ah.x,ah.y,ag[1],ag[2],ag[3],ag[4]));break;case"L":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ag[1],ag[2]));break;case"H":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ag[1],ah.y));break;case"V":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ah.x,ag[1]));break;case"Z":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ah.X,ah.Y));
break;}return ag;};var R=function(af,ag){if(af[ag].length>7){af[ag].shift();var ah=af[ag];while(ah.length){af.splice(ag++,0,["C"].concat(ah.splice(0,6)));}af.splice(ag,1);V=G(T.length,ab&&ab.length||0);}};var S=function(aj,ai,ag,af,ah){if(aj&&ai&&aj[ah][0]=="M"&&ai[ah][0]!="M"){ai.splice(ah,0,["M",af.x,af.y]);ag.bx=0;ag.by=0;ag.x=aj[ah][1];ag.y=aj[ah][2];V=G(T.length,ab&&ab.length||0);}};for(var Y=0,V=G(T.length,ab&&ab.length||0);Y<V;Y++){T[Y]=W(T[Y],ac);R(T,Y);ab&&(ab[Y]=W(ab[Y],A));ab&&R(ab,Y);S(T,ab,ac,A,Y);S(ab,T,A,ac,Y);var X=T[Y];var ad=ab&&ab[Y];var U=X.length;var Z=ab&&ad.length;ac.x=X[U-2];ac.y=X[U-1];ac.bx=parseFloat(X[U-4])||ac.x;ac.by=parseFloat(X[U-3])||ac.y;A.bx=ab&&(parseFloat(ad[Z-4])||A.x);A.by=ab&&(parseFloat(ad[Z-3])||A.y);A.x=ab&&ad[Z-2];A.y=ab&&ad[Z-1];}return ab?[T,ab]:T;});a.path2curve=function(R,A){return a.pathClone(a._path2curve(R,A));};a.parseDots=n.cached(function(Z){var Y=[];for(var V=0,S=Z.length;V<S;V++){var A={};var X=Z[V].match(t);A.color=w.getRGB(X[1]);if(A.color.error){return null;}A.color=A.color.hex;X[2]&&(A.offset=X[2]+"%");Y.push(A);}for(V=1,S=Y.length-1;V<S;V++){if(!Y[V].offset){var R=parseFloat(Y[V-1].offset||0);var T=0;for(var U=V+1;U<S;U++){if(Y[U].offset){T=Y[U].offset;break;}}if(!T){T=100;U=S;}T=parseFloat(T);var W=(T-R)/(U-V+1);for(;V<U;V++){R+=W;Y[V].offset=R+"%";}}}return Y;});a.XYToString=function(){return this.x+d+this.y;};a.getPointAtSegmentLength=n.cached(function(S,A,W,V,ac,ab,aa,Z,T){var Y=0;var U;for(var X=0;X<1.01;X+=0.01){var R=a.findDotAtSegment(S,A,W,V,ac,ab,aa,Z,X);X&&(Y+=K(K(U.x-R.x,2)+K(U.y-R.y,2),0.5));if(Y>=T){return R;}U=R;}});var z={};a.getPointAtSegmentLength=function(U,R,Y,X,ag,af,ae,ac,V){var ab=0;var aa=100;var T=[U,R,Y,X,ag,af,ae,ac].join();var A=z[T];var W;var S;if(!A){A={data:[]};z[T]=A;}if(A.timer){clearTimeout(A.timer);}A.timer=setTimeout(function(){delete z[T];},2000);if(V!=null){var ad=getPointAtSegmentLength(U,R,Y,X,ag,af,ae,ac);aa=~~ad*10;}for(var Z=0;Z<aa+1;Z++){if(A.data[V]>Z){S=A.data[Z*aa];}else{S=a.findDotsAtSegment(U,R,Y,X,ag,af,ae,ac,Z/aa);A.data[Z]=S;}if(Z){ab+=K(K(W.x-S.x,2)+K(W.y-S.y,2),0.5);}if(V!=null&&ab>=V){return S;}if(V==null){return ab;}}};a.getLengthFactory=function(A,R){return function(ad,U,V){ad=a.path2curve(ad);var aa;var Z;var S;var W;var T="";var ac={};var ab;var Y=0;for(var X=0,U=ad.length;X<U;X++){S=ad[X];if(S[0]=="M"){aa=+S[1];Z=+S[2];}else{W=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6]);if(Y+W>U){if(R&&!ac.start){ab=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],U-Y);T+=["C",ab.start.x,ab.start.y,ab.m.x,ab.m.y,ab.x,ab.y];if(V){return T;}ac.start=T;T=["M",ab.x,ab.y+"C",ab.n.x,ab.n.y,ab.end.x,ab.end.y,S[5],S[6]].join();Y+=W;aa=+S[5];Z=+S[6];continue;}if(!A&&!R){ab=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],U-Y);return{x:ab.x,y:ab.y,alpha:ab.alpha};}}Y+=W;aa=+S[5];Z=+S[6];}T+=S;}ac.end=T;ab=A?Y:R?ac:a.findDotsAtSegment(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],1);ab.alpha&&(ab={x:ab.x,y:ab.y,alpha:ab.alpha});return ab;};};a.getTotalLength=a.getLengthFactory(1);a.getPointAtLength=a.getLengthFactory();a.getSubpathsAtLength=a.getLengthFactory(0,1);a.applyAttributes=function(S,A,U){var X;if(U!=null){X={};X[A]=U;}else{if(A!=null&&E(A)){X=A;}}var W=S.paper.customAttributes;for(var R in W){if(W.hasOwnProperty(R)&&X.hasOwnProperty(R)&&p(W[R])){var T=W[R].apply(S,[].concat(X[R]));S.attrs[R]=X[R];for(var V in T){if(T.hasOwnProperty(V)){X[V]=T[V];}}}}return X;};g.prototype={attr:F,blur:F,clone:function(){if(this.removed){return null;}var A=this.attr();delete A.scale;delete A.translation;return this.paper[this.type]().attr(A);},createElement:F,detach:function(S,R){var A=this;n.detach(g._getEventType(S),R,(A.shape||A.node||y));return A;},getRegion:F,getPointAtLength:function(A){if(this.type!="path"){return;}return a.getPointAtLength(this.attrs.path,A);},getSubpath:function(S,R){if(this.type!="path"){return;}if(L.abs(this.getTotalLength()-R)<"1e-6"){return a.getSubpathsAtLength(this.attrs.path,S).end;}var A=a.getSubpathsAtLength(this.attrs.path,R,1);return S?a.getSubpathsAtLength(A,S).end:A;},getTotalLength:function(){if(this.type!="path"){return;}if(this.node.getTotalLength){return this.node.getTotalLength();}return a.getTotalLength(this.attrs.path);},hide:F,hover:function(R,A){return this.on("mouseover",R).on("mouseout",A);},insertAfter:F,insertBefore:F,on:function(U,T,R){var A=this;var S=g._getEventType(U);n.on(S,n.bind(T,R||A),A.shape||A.node||y,g._getEventConfig(S,U));return A;},remove:F,resetScale:function(){if(this.removed){return this;}this._.sx=1;this._.sy=1;this.attrs.scale="1 1";},rotate:F,scale:function(ao,an,ag,ae){if(this.removed){return this;}if(ao==null&&an==null){return{x:this._.sx,y:this._.sy,toString:a.XYToString};}an=an||ao;!+an&&(an=ao);var R;var A;var ax;var aw;var aA=this.attrs;if(ao!=0){var aB=this.getRegion();var U=aB.x+aB.width/2;var T=aB.y+aB.height/2;var au=L.abs(ao/this._.sx);var at=L.abs(an/this._.sy);ag=(+ag||ag==0)?ag:U;ae=(+ae||ae==0)?ae:T;var Y=~~(this._.sx>0);var X=~~(this._.sy>0);var af=~~(ao/L.abs(ao));var ad=~~(an/L.abs(an));var W=au*af;var V=at*ad;var ap=this.node.style;var am=ag+L.abs(U-ag)*W*(U>ag==Y?1:-1);var al=ae+L.abs(T-ae)*V*(T>ae==X?1:-1);var aj=(ao*af>an*ad?at:au);switch(this.type){case"rect":case"image":var aa=aA.width*au;var ak=aA.height*at;this.attr({height:ak,r:aA.r*aj,width:aa,x:am-aa/2,y:al-ak/2});break;case"circle":case"ellipse":this.attr({rx:aA.rx*af*au,ry:aA.ry*ad*at,r:aA.r*k(af*au,ad*at),cx:am,cy:al});break;case"text":this.attr({x:am,y:al});break;case"path":var ar=a.pathToRelative(aA.path);var Z=true;var ai=Y?W:au;var ah=X?V:at;for(var az=0,ab=ar.length;az<ab;az++){var av=ar[az];var ac=v.call(av[0]);if(ac=="M"&&Z){continue;}else{Z=false;}if(ac=="A"){av[ar[az].length-2]*=ai;av[ar[az].length-1]*=ah;av[1]*=au;av[2]*=at;av[5]=+(af+ad?!!+av[5]:!+av[5]);}else{if(ac=="H"){for(var ay=1,S=av.length;ay<S;ay++){av[ay]*=ai;}}else{if(ac=="V"){for(ay=1,S=av.length;ay<S;ay++){av[ay]*=ah;}}else{for(ay=1,S=av.length;ay<S;
ay++){av[ay]*=(ay%2)?ai:ah;}}}}}var aq=a.pathDimensions(ar);R=am-aq.x-aq.width/2;A=al-aq.y-aq.height/2;ar[0][1]+=R;ar[0][2]+=A;this.attr({path:ar});break;}if(this.type in B&&(af!=1||ad!=1)){if(this.transformations){this.transformations[2]="scale(".concat(af,",",ad,")");this.node.setAttribute("transform",this.transformations.join(d));R=(af==-1)?-aA.x-(aa||0):aA.x;A=(ad==-1)?-aA.y-(ak||0):aA.y;this.attr({x:R,y:A});aA.fx=af-1;aA.fy=ad-1;}else{this.node.filterMatrix=M+".Matrix(M11=".concat(af,", M12=0, M21=0, M22=",ad,', Dx=0, Dy=0, sizingmethod="auto expand", filtertype="bilinear")');ap.filter=(this.node.filterMatrix||l)+(this.node.filterOpacity||l);}}else{if(this.transformations){this.transformations[2]=l;this.node.setAttribute("transform",this.transformations.join(d));aA.fx=0;aA.fy=0;}else{this.node.filterMatrix=l;ap.filter=(this.node.filterMatrix||l)+(this.node.filterOpacity||l);}}aA.scale=[ao,an,ag,ae].join(d);this._.sx=ao;this._.sy=an;}return this;},show:F,toBack:F,toFront:F,toString:function(){return'"'+v.call(this.type)+'": AlloyUI Drawing Element';},translate:F,unhover:function(R,A){return this.detach("mouseover",R).detach("mouseout",A);}};g._getEventConfig=F;g._getEventType=function(A){return A;};c.Element=g;var e=n.Component.create({NAME:"set",EXTENDS:n.ArrayList,prototype:{pop:function(){var A=this;return A._items.pop();},push:function(){var A=this;var R=A._items;var S=arguments;var V=S.length;var U;for(var T=0;T<V;T++){U=S[T];if(U&&U instanceof g||U instanceof e){R[R.length]=S[T];}}return A;},clone:function(){var A=this;var R=new e();R._items=A._items;return R;},invoke:function(S){var A=this;var T=Array.prototype.slice.call(arguments,1);var W;var R=A._items;for(var U=0,V=R.length;U<V;U++){W=R[U];if(S in W){W[S].apply(R[U],T);}}return A;}}});c.Set=e;e.addMethod=function(A){return n.ArrayList.addMethod(c.Set.prototype,A);};var H=n.Object.keys(g.prototype);e.addMethod(H);e.prototype.getRegion=e.prototype.getBBox=function(){var R=this;var A=[];var X=[];var S=[];var V=[];var T=R._items;for(var U=T.length;U--;){var W=T[U].getRegion();A.push(W.x);X.push(W.y);S.push(W.x+W.width);V.push(W.y+W.height);}A=k.apply(0,A);X=k.apply(0,X);return{x:A,y:X,width:G.apply(0,S)-A,height:G.apply(0,V)-X};};e.prototype.attr=function(S,V){var A=this;var R=A._items;if(S&&s(S)&&E(S[0])){for(var T=0,U=S.length;T<U;T++){R[T].attr(S[T]);}}else{for(var T=0,U=R.length;T<U;T++){R[T].attr(S,V);}}return A;};e.prototype.toString=function(){return this._items.join(",");};c.REGEX_ISURL=C;c.REGEX_SEPARATOR=N;c.REGEX_SEPARATOR_GRADIENT=j;c.REGEX_RADIAL_GRADIENT=J;c.MAP_ATTRS_AVAILABLE=m;c.MAP_TYPES_IMAGE_TEXT=B;c.MAP_TYPES_CIRCLE_ELLIPSE=r;c.STR_EMPTY=l;c.STR_FILL=D;c.STR_SPACE=d;c.STR_MS_PROG_ID_PREFIX=M;c.Util=a;c.Element=g;n.Drawing=c;},"@VERSION@",{requires:["aui-base","aui-color-util","substitute"]});