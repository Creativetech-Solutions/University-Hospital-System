AUI.add("aui-editor-tools-plugin",function(b){var e=b.Lang,f=b.UA,g="justify",i={div:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,p:true},k={br:true},c={li:true},d='<div style="text-align: {0};">{1}</div>';function j(m){var n=null;var o=m.get("childNodes");o.some(function(q,p,r){if(q.get("innerHTML")=="{0}"){q.html("");n=q;return true;}return j(q);});return n;}function l(n,o,m){var q=b.Node.create(m);n.insert(q,o);if(q.html()!=""){if(q.html()=="{0}"){q.html("");}else{var p=j(q);if(p){q=p;}}}return q;}function h(o,n){var m=(f.ie?"innerText":"textContent");return(o.get(m)==n.get(m));}var a={};b.mix(b.Plugin.ExecCommand.COMMANDS,{justify:function(p,o){var t=this;var u=t.get("host");var n=u.getInstance();var s=new n.Selection();var r=s.getSelected();var q=false;if(s.isCollapsed||!r.size()){var m=s.anchorTextNode;r=[m];q=true;}b.each(r,function(y,v,A){var w=y.get("tagName");if(w){w=w.toLowerCase();}if(k[w]){return;}if(w=="font"){var z=y.get("parentNode");if(!z.test("body")){y=z;w=y.get("tagName").toLowerCase();}}if(!y.test("body")&&y.getComputedStyle("textAlign")==o){return;}var x=y.get("parentNode");var B;if(i[w]||y.getComputedStyle("display")=="block"){B=y;}else{if(!x.get("childNodes").item(1)||c[w]){w=x.get("tagName").toLowerCase();if(i[w]||x.getComputedStyle("display")=="block"){B=x;}}else{if(q){u.execCommand("inserthtml",e.sub(d,[o,n.Selection.CURSOR]));s.focusCursor(true,true);return;}else{B=b.Node.create(e.sub(d,[o,""]));x.insert(B,y);B.append(y);}}}if(B){B.setStyle("textAlign",o);}});},justifycenter:function(){var m=this;return m.get("host").execCommand(g,"center");},justifyleft:function(){var m=this;return m.get("host").execCommand(g,"left");},justifyright:function(){var m=this;return m.get("host").execCommand(g,"right");},subscript:function(){var m=this;return m.get("host").execCommand("wrap","sub");},superscript:function(){var m=this;return m.get("host").execCommand("wrap","sup");},wraphtml:function(y,G){var D=this;var u=D.get("host");var s=u.getInstance();var F=new s.Selection();var v=F.getSelected();if(!F.isCollapsed&&v.size()){var x;var B;var q;var r;var m;if(v.size()>1){var E;var t;v.each(function(L,H,M){var I=L;var K=0;var J;while((I=I.ancestor())&&!I.test("body")){K++;J=I;}if(t==null||K<t){E=H;t=K;}});var C=v.item(E);var p=(C.test("font")?C.ancestor().ancestor():C.ancestor());var w=[];m=p.get("childNodes");v.each(function(J,H,K){var I=J;var L=-1;if(J.ancestor().test("body")){L=H;}else{while((I=I.ancestor())!=null){m.some(function(M,O,N){if(M==I){L=O;return true;}});if(L!=-1){break;}}}w[H]=L;});if(w.length>1){var n;var A;for(var z=0;z<w.length;z++){if(w[z]!=-1){if(w[z]<n||n==null){n=w[z];x=v.item(z);B=m.item(n);}if(w[z]>A||A==null){A=w[z];q=v.item(z);r=m.item(A);}}else{B=null;break;}}}}if(B!=null&&((B==r)||(h(x,B)&&h(q,r)))){var p=B.ancestor();var o=l(p,B,G);for(var z=n;z<=A;z++){o.append(m.item(z));}}else{v.each(function(K,H,L){var I=K.get("tagName").toLowerCase();if(!k[I]){var J=K.ancestor();var M=l(J,K,G);M.append(K);}});}}else{u.execCommand("inserthtml",e.sub(G,[s.Selection.CURSOR]));if(G.indexOf("{0}")!=-1){F.focusCursor(true,true);}}}});b.Plugin.EditorTools=a;},"@VERSION@",{requires:["aui-base","editor-base"]});