AUI.add("aui-tree-data",function(o){var i=o.Lang,n=i.isArray,l=i.isBoolean,m=i.isObject,c=i.isUndefined,z="boundingBox",g="children",p="container",r=".",j="id",x="index",u="lazyLoad",e="leaf",w="nextSibling",C="node",d="ownerTree",h="parentNode",t="prevSibling",q="previousSibling",v="tree",s="tree-node",b="tree-data",k=function(A){return(o.instanceOf(A,o.TreeNode));},f=function(A){return(o.instanceOf(A,o.TreeView));},y=o.getClassName,a=y(v,C);var B=function(){};B.ATTRS={container:{setter:o.one},children:{value:[],validator:n,setter:"_setChildren"},index:{value:{}}};o.mix(B.prototype,{childrenLength:0,initTreeData:function(){var A=this;A.publish("move");A.publish("append",{defaultFn:A._appendChild});A.publish("remove",{defaultFn:A._removeChild});},destructor:function(){var A=this;A.eachChildren(function(D){D.destroy();},true);},getNodeById:function(D){var A=this;return A.get(x)[D];},isRegistered:function(D){var A=this;return !!(A.get(x)[D.get(j)]);},updateReferences:function(F,G,J){var K=this;var I=F.get(h);var A=F.get(d);var H=I&&(I!==G);if(I){if(H){var D=I.get(g);o.Array.removeItem(D,F);I.set(g,D);}I.unregisterNode(F);}if(A){A.unregisterNode(F);}F.set(h,G);F.set(d,J);if(G){G.registerNode(F);}if(J){J.registerNode(F);}if(A!=J){F.eachChildren(function(L){K.updateReferences(L,L.get(h),J);});}if(H){var E=K.getEventOutputMap(F);if(!I.get("children").length){I.collapse();I.hideHitArea();}E.tree.oldParent=I;E.tree.oldOwnerTree=A;K.bubbleEvent("move",E);}},refreshIndex:function(){var A=this;A.updateIndex({});A.eachChildren(function(D){A.registerNode(D);},true);},registerNode:function(F){var A=this;var E=F.get(j);var D=A.get(x);if(E){D[E]=F;}if(f(A)){F.addTarget(A);F.set(d,A);}F._inheritOwnerTreeAttrs();A.updateIndex(D);},updateIndex:function(D){var A=this;if(D){A.set(x,D);}},unregisterNode:function(E){var A=this;var D=A.get(x);delete D[E.get(j)];if(f(A)){E.removeTarget(A);}A.updateIndex(D);},collapseAll:function(){var A=this;A.eachChildren(function(D){D.collapse();},true);},expandAll:function(){var A=this;A.eachChildren(function(D){D.expand();},true);},selectAll:function(){var A=this;A.eachChildren(function(D){D.select();},true);},unselectAll:function(){var A=this;A.eachChildren(function(D){D.unselect();},true);},eachChildren:function(F,D){var A=this;var E=A.getChildren(D);o.Array.each(E,function(G){if(G){F.apply(A,arguments);}});},eachParent:function(E){var D=this;var A=D.get(h);while(A){if(A){E.call(D,A);}A=A.get(h);}},bubbleEvent:function(G,F,H,E){var D=this;D.fire(G,F);if(!H){var A=D.get(h);F=F||{};if(c(E)){E=true;}F.stopActionPropagation=E;while(A){A.fire(G,F);A=A.get(h);}}},createNode:function(D){var A=this;var E=o.TreeNode.nodeTypes[m(D)?D.type:D]||o.TreeNode;return new E(m(D)?D:{});},appendChild:function(F,E){var A=this;var D=A.getEventOutputMap(F);A.bubbleEvent("append",D,E);},_appendChild:function(J){if(J.stopActionPropagation){return false;}var A=this;var I=J.tree.node;var D=A.get(d);var G=A.get(g);A.updateReferences(I,A,D);var H=G.push(I);A.set(g,G);var F=H-2;var E=A.item(F);I._nextSibling=null;I._prevSibling=E;I.render(A.get(p));},item:function(D){var A=this;return A.get(g)[D];},indexOf:function(D){var A=this;return o.Array.indexOf(A.get(g),D);},hasChildNodes:function(){var A=this;return(A.getChildrenLength()>0);},getChildren:function(D){var A=this;var F=[];var E=A.get(g);F=F.concat(E);if(D){A.eachChildren(function(G){F=F.concat(G.getChildren(D));});}return F;},getChildrenLength:function(){var A=this;return(A.childrenLength||A.get(g).length);},getEventOutputMap:function(D){var A=this;return{tree:{instance:A,node:D||A}};},removeChild:function(E){var A=this;var D=A.getEventOutputMap(E);A.bubbleEvent("remove",D);},_removeChild:function(G){if(G.stopActionPropagation){return false;}var A=this;var F=G.tree.node;var D=A.get(d);if(A.isRegistered(F)){F.set(h,null);A.unregisterNode(F);F.set(d,null);if(D){D.unregisterNode(F);}F.get(z).remove();var E=A.get(g);o.Array.removeItem(E,F);A.set(g,E);}},empty:function(){var A=this;A.eachChildren(function(E){var D=E.get(h);if(D){D.removeChild(E);}});},insert:function(J,G,H){var N=this;G=G||this;if(G===J){return false;}var A=G.get(h);if(J&&A){var I=J.get(z);var O=G.get(z);var M=G.get(d);if(H==="before"){O.placeBefore(I);}else{if(H==="after"){O.placeAfter(I);}}var D=[];var L=A.get(z).all("> ul > li");L.each(function(P){D.push(P.getData(s));});var K=I.get(w);J.set(w,K&&K.getData(s));var F=I.get(q);J.set(t,F&&F.getData(s));G.updateReferences(J,A,M);A.set(g,D);}J.render();var E=G.getEventOutputMap(J);E.tree.refTreeNode=G;G.bubbleEvent("insert",E);},insertAfter:function(E,D){var A=this;A.insert(E,D,"after");},insertBefore:function(E,D){var A=this;A.insert(E,D,"before");},getNodeByChild:function(E){var A=this;var D=E.ancestor(r+a);if(D){return D.getData(s);}return null;},_inheritOwnerTreeAttrs:i.emptyFn,_setChildren:function(F){var D=this;var I=[];var E=D.get(p);if(!E){E=D._createNodeContainer();}D.childrenLength=F.length;var G=D;if(k(D)){G=D.get(d);}var A=f(G);var H=true;if(A){H=G.get(u);}D.updateIndex({});if(D.childrenLength>0){D.set(e,false);}o.Array.each(F,function(M,K){if(M){if(!k(M)&&m(M)){var L=M[g];var J=L&&L.length;M[d]=G;M[h]=D;if(J&&H){delete M[g];}M=D.createNode(M);if(J&&H){M.childrenLength=L.length;o.setTimeout(function(){M.set(g,L);},50);}}if(A){G.registerNode(M);}M.render(E);if(o.Array.indexOf(I,M)===-1){I.push(M);}}});return I;}});o.TreeData=B;},"@VERSION@",{requires:["aui-base","aui-task-manager"],skinnable:false});AUI.add("aui-tree-node",function(ad){var S=ad.Lang,aG=S.isString,ax=S.isBoolean,aP="alwaysShowHitArea",O="",r="boundingBox",f="children",aC="clearfix",w="collapsed",a="container",ab="content",u="contentBox",i="expanded",o="helper",V="hidden",e="hitAreaEl",H="hitarea",T="icon",aO="iconEl",aq="id",ai="label",W="labelEl",R="lastSelected",aB="leaf",p="node",ak="over",Y="ownerTree",d="parentNode",av="radio",aM="rendered",aA="selected",s=" ",g="tree",I="tree-node",aK=function(){return Array.prototype.slice.call(arguments).join(s);},an=function(A){return(A instanceof ad.TreeNode);
},aI=function(A){return(A instanceof ad.TreeView);},G=ad.getClassName,af=G(o,aC),y=G(g,w),b=G(g,a),aw=G(g,u),aQ=G(g,i),t=G(g,V),ar=G(g,H),F=G(g,T),j=G(g,ai),ay=G(g,p),E=G(g,p,ab),at=G(g,p,V,H),h=G(g,p,aB),aF=G(g,p,ak),J=G(g,p,aA),ac='<div class="'+ar+'"></div>',q='<div class="'+F+'"></div>',c='<div class="'+j+'"></div>',aN="<ul></ul>",v='<li class="'+ay+'"></li>',Z='<div class="'+aK(af,E)+'"></div>';var M=ad.Component.create({NAME:I,ATTRS:{alwaysShowHitArea:{validator:ax,value:true},boundingBox:{valueFn:function(){return ad.Node.create(v);}},contentBox:{valueFn:function(){return ad.Node.create(Z);}},draggable:{validator:ax,value:true},expanded:{validator:ax,value:false},hitAreaEl:{setter:ad.one,valueFn:function(){return ad.Node.create(ac);}},iconEl:{setter:ad.one,valueFn:function(){return ad.Node.create(q);}},id:{validator:aG,valueFn:function(){return ad.guid();}},label:{validator:aG,value:O},labelEl:{setter:ad.one,valueFn:function(){var A=this;var aT=A.get(ai);return ad.Node.create(c).html(aT).unselectable();}},leaf:{setter:function(aT){var A=this;if(aT&&A.get(f).length){return false;}return aT;},validator:ax,value:true},nextSibling:{getter:"_getSibling",validator:an,value:null},ownerTree:{value:null},parentNode:{validator:function(A){return an(A)||aI(A);},value:null},prevSibling:{getter:"_getSibling",validator:an,value:null},rendered:{validator:ax,value:false},tabIndex:{value:null}},AUGMENTS:[ad.TreeData],EXTENDS:ad.Base,prototype:{BOUNDING_TEMPLATE:v,CONTENT_TEMPLATE:Z,initializer:function(){var A=this;A.get(r).setData(I,A);A._syncTreeNodeBBId();A._uiSetExpanded(A.get(i));A._uiSetLeaf(A.get(aB));A.initTreeData();},bindUI:function(){var A=this;A.after("childrenChange",ad.bind(A._afterSetChildren,A));A.after("expandedChange",ad.bind(A._afterExpandedChange,A));A.after("idChange",A._afterSetId,A);A.after("leafChange",ad.bind(A._afterLeafChange,A));},render:function(aU){var aT=this;if(!aT.get(aM)){aT.renderUI();aT.bindUI();aT.syncUI();aT.set(aM,true);}if(aU){var aV=aT.get(r);var A=aT.get(d);aV.appendTo(aU);if(A){var aW=A.get(ah);if(aW){aV.insertBefore(aW.element,null);}}}},renderUI:function(){var A=this;A._renderBoundingBox();A._renderContentBox();},syncUI:function(){var A=this;A._syncIconUI();},appendChild:function(){var A=this;if(!A.isLeaf()){ad.TreeNode.superclass.appendChild.apply(A,arguments);}},collapse:function(){var A=this;A.set(i,false);},collapseAll:function(){var A=this;ad.TreeNode.superclass.collapseAll.apply(A,arguments);A.collapse();},contains:function(aT){var A=this;return aT.isAncestor(A);},expand:function(){var A=this;A.set(i,true);},expandAll:function(){var A=this;ad.TreeNode.superclass.expandAll.apply(A,arguments);A.expand();},getDepth:function(){var aT=this;var aU=0;var A=aT.get(d);while(A){++aU;A=A.get(d);}return aU;},hasChildNodes:function(){var A=this;return(!A.isLeaf()&&ad.TreeNode.superclass.hasChildNodes.apply(A,arguments));},hideHitArea:function(){var A=this;A.get(e).addClass(at);},isAncestor:function(aU){var aT=this;var A=aT.get(d);while(A){if(A===aU){return true;}A=A.get(d);}return false;},isLeaf:function(){var A=this;return A.get(aB);},isSelected:function(){var A=this;return A.get(u).hasClass(J);},out:function(){var A=this;A.get(u).removeClass(aF);},over:function(){var A=this;A.get(u).addClass(aF);},select:function(){var A=this;var aT=A.get(Y);if(aT){aT.set(R,A);}A.get(u).addClass(J);A.fire("select");},showHitArea:function(){var A=this;A.get(e).removeClass(at);},toggle:function(){var A=this;if(A.get(i)){A.collapse();}else{A.expand();}},unselect:function(){var A=this;A.get(u).removeClass(J);A.fire("unselect");},_afterDraggableChange:function(aT){var A=this;A._uiSetDraggable(aT.newVal);A._syncIconUI();},_afterExpandedChange:function(aT){var A=this;A._uiSetExpanded(aT.newVal);A._syncIconUI();},_afterLeafChange:function(aT){var A=this;A._uiSetLeaf(aT.newVal);A._syncIconUI();},_afterLoadingChange:function(aT){var A=this;A._syncIconUI();},_afterSetChildren:function(aT){var A=this;A._syncIconUI();},_createNodeContainer:function(){var A=this;var aT=A.get(a)||ad.Node.create(aN);aT.addClass(b);A.set(a,aT);return aT;},_getSibling:function(aW,aT){var A=this;var aV="_"+aT;var aU=A[aV];if(aU!==null&&!an(aU)){aU=null;A[aV]=aU;}return aU;},_renderBoundingBox:function(){var A=this;var aU=A.get(r);var aT=A.get(u);aT.append(A.get(aO));aT.append(A.get(W));aU.append(aT);var aV=A.get(a);if(aV){if(!A.get(i)){aV.addClass(t);}aU.append(aV);}return aU;},_renderContentBox:function(aV){var A=this;var aT=A.get(u);if(!A.isLeaf()){var aU=A.get(i);aT.addClass(aU?aQ:y);if(aU){A.expand();}}return aT;},_syncHitArea:function(){var A=this;if(A.get(aP)||A.getChildrenLength()){A.showHitArea();}else{A.hideHitArea();A.collapse();}},_syncIconUI:function(){var A=this;A._syncHitArea();},_syncTreeNodeBBId:function(aT){var A=this;A.get(r).attr(aq,A.get(aq));},_uiSetExpanded:function(aV){var A=this;if(!A.isLeaf()){var aU=A.get(a);var aT=A.get(u);if(aV){aT.replaceClass(y,aQ);if(aU){aU.removeClass(t);}}else{aT.replaceClass(aQ,y);if(aU){aU.addClass(t);}}}},_uiSetLeaf:function(aU){var A=this;var aT=A.get(u);if(aU){A.get(a).remove();A.get(e).remove();}else{aT.prepend(A.get(e));A._createNodeContainer();A._uiSetExpanded(A.get(i));}aT.toggleClass(h,aU);}}});ad.TreeNode=M;var au=S.isFunction,aH="cache",aj="io",aL="loaded",aR="loading",ah="paginator",ap="tree-node-io",z=G(g,p,aj,aR);var L=ad.Component.create({NAME:ap,ATTRS:{cache:{validator:ax,value:true},leaf:{validator:ax,value:false},loaded:{validator:ax,value:false},loading:{validator:ax,value:false}},AUGMENTS:[ad.TreeViewPaginator,ad.TreeViewIO],EXTENDS:ad.TreeNode,prototype:{bindUI:function(){var A=this;ad.TreeNodeIO.superclass.bindUI.apply(A,arguments);A.on("ioRequestSuccess",A._onIOSuccess,A);},syncUI:function(){var A=this;ad.TreeNodeIO.superclass.syncUI.apply(A,arguments);},createNodes:function(aT){var A=this;ad.Array.each(ad.Array(aT),function(aU){A.appendChild(A.createNode(aU));});A._syncPaginatorUI(aT);},expand:function(){var A=this;var aT=A.get(aH);var aW=A.get(aj);
var aU=A.get(aL);var aV=A.get(aR);if(!aT){A.set(aL,false);}if(aW&&!aU&&!aV&&!A.hasChildNodes()){if(!aT){A.empty();}A.initIO();}else{ad.TreeNodeIO.superclass.expand.apply(A,arguments);}},_inheritOwnerTreeAttrs:function(){var A=this;var aT=A.get(Y);if(aT){if(!A.get(aj)){var aW=ad.clone(aT.get(aj),true,function(aY,aX){if(au(aY)&&(aY.defaultFn||aY.wrappedFn)){return false;}return true;});A.set(aj,aW);}if(!A.get(ah)){var aU=aT.get(ah);var aV=ad.clone(aU);if(aV&&aV.element){aV.element=aU.element.clone();}A.set(ah,aV);}}},_onIOSuccess:function(aT){var A=this;A.expand();}}});ad.TreeNodeIO=L;var k="checkbox",n="checked",aa="checkContainerEl",aD="checkEl",N="checkName",X=".",l="name",B="tree-node-check",ag=G(g,p,k),am=G(g,p,k,a),ao=G(g,p,n),Q='<div class="'+am+'"></div>',al='<input class="'+ag+'" type="checkbox" />';var az=ad.Component.create({NAME:B,ATTRS:{checked:{validator:ax,value:false},checkContainerEl:{setter:ad.one,valueFn:function(){return ad.Node.create(Q);}},checkEl:{setter:ad.one,valueFn:function(){var A=this;var aU=A.get(aq)+"Checkbox";var aT={ID:aU,NAME:A.get(N)};return ad.Node.create(al).attr(aT);}},checkName:{value:B,validator:aG}},EXTENDS:ad.TreeNodeIO,prototype:{initializer:function(){var A=this;A._uiSetChecked(A.get(n));},renderUI:function(){var aT=this;ad.TreeNodeCheck.superclass.renderUI.apply(aT,arguments);var A=aT.get(aD);var aU=aT.get(aa);A.hide();aU.append(A);aT.get(W).placeBefore(aU);if(aT.isChecked()){aT.check();}},bindUI:function(){var A=this;var aT=A.get(u);ad.TreeNodeCheck.superclass.bindUI.apply(A,arguments);A.after("checkedChange",ad.bind(A._afterCheckedChange,A));aT.delegate("click",ad.bind(A.toggleCheck,A),X+am);aT.delegate("click",ad.bind(A.toggleCheck,A),X+j);A.get(W).swallowEvent("dblclick");},check:function(aT){var A=this;A.set(n,true,{originalTarget:aT});},isChecked:function(){var A=this;return A.get(n);},toggleCheck:function(){var aT=this;var A=aT.get(aD);var aU=A.attr(n);if(!aU){aT.check();}else{aT.uncheck();}},uncheck:function(aT){var A=this;A.set(n,false,{originalTarget:aT});},_afterCheckedChange:function(aT){var A=this;A._uiSetChecked(aT.newVal);},_uiSetChecked:function(aV){var aT=this;var A=aT.get(aD);var aU=aT.get(u);if(aV){aU.addClass(ao);A.attr(n,n);}else{aU.removeClass(ao);A.attr(n,O);}}}});ad.TreeNodeCheck=az;var C="child",P="tree-node-task",K="unchecked",aE=function(A){return A instanceof ad.TreeNodeCheck;},ae=G(g,p,C,K);var aS=ad.Component.create({NAME:P,EXTENDS:ad.TreeNodeCheck,prototype:{check:function(aT){var A=this;aT=aT||A;if(!A.isLeaf()){A.eachChildren(function(aU){if(aE(aU)){aU.check(aT);}});}A.eachParent(function(aU){if(aE(aU)&&!aU.isChecked()){aU.get(u).addClass(ae);}});A.get(u).removeClass(ae);ad.TreeNodeTask.superclass.check.call(A,aT);},uncheck:function(aT){var A=this;aT=aT||A;if(!A.isLeaf()){A.eachChildren(function(aU){if(aU instanceof ad.TreeNodeCheck){aU.uncheck(aT);}});}A.eachParent(function(aU){if(aE(aU)&&!aU.isChecked()){aU.get(u).removeClass(ae);}});A.get(u).removeClass(ae);ad.TreeNodeTask.superclass.uncheck.call(A,aT);}}});ad.TreeNodeTask=aS;var D="tree-node-radio",m=function(A){return A instanceof ad.TreeNodeRadio;},x=G(g,p,av),U=G(g,p,av,n);var aJ=ad.Component.create({NAME:D,EXTENDS:ad.TreeNodeTask,prototype:{renderUI:function(){var A=this;ad.TreeNodeRadio.superclass.renderUI.apply(A,arguments);A.get(u).addClass(x);},_uncheckNodesRadio:function(aV){var A=this;var aU;if(aV){aU=aV.get(f);}else{var aT=A.get(Y);if(aT){aU=aT.get(f);}else{return;}}ad.Array.each(aU,function(aX,aW,aY){if(!aX.isLeaf()){A._uncheckNodesRadio(aX);}if(m(aX)){aX.uncheck();}});},_uiSetChecked:function(aT){var A=this;if(aT){A.get(u).addClass(U);A.get(aD).attr(n,n);}else{A.get(u).removeClass(U);A.get(aD).attr(n,O);}},check:function(){var A=this;A._uncheckNodesRadio();ad.TreeNodeRadio.superclass.check.apply(A,arguments);}}});ad.TreeNodeRadio=aJ;ad.TreeNode.nodeTypes={check:ad.TreeNodeCheck,io:ad.TreeNodeIO,node:ad.TreeNode,radio:ad.TreeNodeRadio,task:ad.TreeNodeTask};},"@VERSION@",{requires:["aui-tree-data","aui-tree-io","aui-tree-paginator","json","querystring-stringify"],skinnable:false});AUI.add("aui-tree-paginator",function(m){var e=m.Lang,k=e.isObject,p=e.isValue,s=m.getClassName,g="children",n="container",f="end",c="io",j="limit",d="Load more results",u="node",b="ownerTree",a="paginator",o="start",r="tree",q="tree-node-io",i="paginatorClick",h=s(r,u,a),l='<a class="'+h+'" href="javascript:void(0);">{moreResultsLabel}</a>';function t(w){var v=this;m.after(v._bindPaginatorUI,this,"bindUI");m.after(v._syncPaginatorUI,this,"syncUI");}t.ATTRS={paginator:{setter:function(x){var w=this;var v=m.Node.create(e.sub(l,{moreResultsLabel:x.moreResultsLabel||d}));return m.merge({alwaysVisible:false,autoFocus:true,element:v,endParam:f,limitParam:j,start:0,startParam:o},x);},validator:k}};t.prototype={_bindPaginatorUI:function(){var v=this;var w=v.get(a);if(w){w.element.on("click",m.bind(v._handlePaginatorClickEvent,v));}v._createEvents();},_createEvents:function(){var v=this;v.publish(i,{defaultFn:v._defPaginatorClickFn,prefix:q});},_defPaginatorClickFn:function(w){var v=this;var x=v.get(a);if(p(x.limit)){x.start=v.getChildrenLength();}if(v.get(c)){v.initIO();}},_handlePaginatorClickEvent:function(x){var v=this;var w=v.getEventOutputMap(v);v.fire(i,w);x.halt();},_syncPaginatorIOData:function(y){var v=this;var x=v.get(a);if(x&&p(x.limit)){var w=y.cfg.data||{};w[x.limitParam]=x.limit;w[x.startParam]=x.start;w[x.endParam]=(x.start+x.limit);y.cfg.data=w;}},_syncPaginatorUI:function(x){var B=this;var C=B.get(a);if(C){var A=true;if(x){A=(x.length>0);}var w=B.getChildrenLength();var v=C.start;var z=C.total||w;var D=w&&A&&(z>w);if(C.alwaysVisible||D){B.get(n).append(C.element.show());if(C.autoFocus){try{C.element.focus();}catch(y){}}}else{C.element.hide();}}}};m.TreeViewPaginator=t;},"@VERSION@",{requires:["aui-base"],skinnable:false});AUI.add("aui-tree-view",function(ab){var T=ab.Lang,aq=T.isBoolean,aw=T.isString,ar=ab.UA,q="boundingBox",d="children",a="container",Y="content",s="contentBox",R=".",ao="file",z="hitarea",P="icon",af="label",N="lastSelected",au="leaf",p="node",V="ownerTree",F="root",S="selectOnToggle",r=" ",f="tree",B="tree-node",K="tree-view",e="type",x="view",ax=function(){return Array.prototype.slice.call(arguments).join(r);
},ak=function(A){return(A instanceof ab.TreeNode);},y=ab.getClassName,an=y(f,z),w=y(f,P),i=y(f,af),u=y(f,p,Y),l=y(f,F,a),ag=y(f,x,Y);var O=ab.Component.create({NAME:K,ATTRS:{type:{value:ao,validator:aw},lastSelected:{value:null,validator:ak},lazyLoad:{validator:aq,value:true},selectOnToggle:{validator:aq,value:false}},AUGMENTS:[ab.TreeData,ab.TreeViewPaginator,ab.TreeViewIO],prototype:{CONTENT_TEMPLATE:"<ul></ul>",initializer:function(){var A=this;var L=A.get(q);L.setData(K,A);A.initTreeData();},bindUI:function(){var A=this;A.after("childrenChange",ab.bind(A._afterSetChildren,A));A._delegateDOM();},createNodes:function(L){var A=this;ab.Array.each(ab.Array(L),function(aA){var az=A.createNode(aA);A.appendChild(az);});A._syncPaginatorUI(L);},renderUI:function(){var A=this;A._renderElements();},_afterSetChildren:function(L){var A=this;A._syncPaginatorUI();},_createFromHTMLMarkup:function(L){var A=this;L.all("> li").each(function(aD){var aC=aD.one("> *").remove();var aB=aC.outerHTML();var aA=aD.one("> ul");var aE=new ab.TreeNode({boundingBox:aD,container:aA,label:aB,leaf:!aA,ownerTree:A});if(aA){aE.render();A._createFromHTMLMarkup(aA);}else{aE.render();}var az=aD.get(c).get(c);var aF=az.getData(B);if(!ab.instanceOf(aF,ab.TreeNode)){aF=az.getData(K);}aF.appendChild(aE);});},_createNodeContainer:function(){var A=this;var L=A.get(s);A.set(a,L);return L;},_renderElements:function(){var A=this;var L=A.get(s);var az=A.get(d);var aA=A.get(e);var aB=y(f,aA);L.addClass(ag);L.addClass(ax(aB,l));if(!az.length){A._createFromHTMLMarkup(L);}},_delegateDOM:function(){var A=this;var L=A.get(q);L.delegate("click",ab.bind(A._onClickNodeEl,A),R+u);L.delegate("dblclick",ab.bind(A._onClickHitArea,A),R+w);L.delegate("dblclick",ab.bind(A._onClickHitArea,A),R+i);L.delegate("mouseenter",ab.bind(A._onMouseEnterNodeEl,A),R+u);L.delegate("mouseleave",ab.bind(A._onMouseLeaveNodeEl,A),R+u);},_onClickNodeEl:function(L){var A=this;var aA=A.getNodeByChild(L.currentTarget);if(aA){if(L.target.test(R+an)){aA.toggle();if(!A.get(S)){return;}}if(!aA.isSelected()){var az=A.get(N);if(az){az.unselect();}aA.select();}}},_onMouseEnterNodeEl:function(L){var A=this;var az=A.getNodeByChild(L.currentTarget);if(az){az.over();}},_onMouseLeaveNodeEl:function(L){var A=this;var az=A.getNodeByChild(L.currentTarget);if(az){az.out();}},_onClickHitArea:function(L){var A=this;var az=A.getNodeByChild(L.currentTarget);if(az){az.toggle();}}}});ab.TreeView=O;var J=T.isNumber,ac="above",b="append",ae="below",am="block",ah="body",av="clearfix",aa="default",t="display",aj="down",v="drag",m="draggable",X="dragCursor",ap="dragNode",h="expanded",n="helper",at="insert",D="offsetHeight",c="parentNode",ay="scrollDelay",M="state",ai="tree-drag-drop",al="up",I=ab.DD.DDM,ad=y(n,av),j=y(P),Z=y(f,v,n),o=y(f,v,n,Y),H=y(f,v,n,af),E=y(f,v,at,ac),W=y(f,v,at,b),G=y(f,v,at,ae),k=y(f,v,M,b),Q=y(f,v,M,at,ac),U=y(f,v,M,at,ae),C='<div class="'+Z+'">'+'<div class="'+[o,ad].join(r)+'">'+'<span class="'+j+'"></span>'+'<span class="'+H+'"></span>'+"</div>"+"</div>";var g=ab.Component.create({NAME:ai,ATTRS:{helper:{value:null},scrollDelay:{value:100,validator:J}},EXTENDS:ab.TreeView,prototype:{direction:ae,dropAction:null,lastY:0,node:null,nodeContent:null,destructor:function(){var A=this;var L=A.get(n);if(L){L.remove(true);}if(A.ddDelegate){A.ddDelegate.destroy();}},bindUI:function(){var A=this;ab.TreeViewDD.superclass.bindUI.apply(this,arguments);A._bindDragDrop();},renderUI:function(){var A=this;ab.TreeViewDD.superclass.renderUI.apply(this,arguments);var L=ab.Node.create(C).hide();ab.one(ah).append(L);A.set(n,L);I.set(X,aa);},_bindDragDrop:function(){var A=this;var az=A.get(q);var L=null;A._createDragInitHandler=function(){A.ddDelegate=new ab.DD.Delegate({bubbleTargets:A,container:az,nodes:R+u,target:true});var aA=A.ddDelegate.dd;aA.plug(ab.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false,borderStyle:null}).plug(ab.Plugin.DDNodeScroll,{scrollDelay:A.get(ay),node:az});aA.removeInvalid("a");if(L){L.detach();}};if(!ar.touch){L=az.on(["focus","mousedown","mousemove"],A._createDragInitHandler);}else{A._createDragInitHandler();}A.on("drag:align",A._onDragAlign);A.on("drag:start",A._onDragStart);A.on("drop:exit",A._onDropExit);A.after("drop:hit",A._afterDropHit);A.on("drop:hit",A._onDropHit);A.on("drop:over",A._onDropOver);},_appendState:function(L){var A=this;A.dropAction=b;A.get(n).addClass(k);L.addClass(W);},_goingDownState:function(L){var A=this;A.dropAction=ae;A.get(n).addClass(U);L.addClass(G);},_goingUpState:function(L){var A=this;A.dropAction=ac;A.get(n).addClass(Q);L.addClass(E);},_resetState:function(L){var A=this;var az=A.get(n);az.removeClass(k);az.removeClass(Q);az.removeClass(U);if(L){L.removeClass(E);L.removeClass(W);L.removeClass(G);}},_updateNodeState:function(A){var aI=this;var aE=A.drag;var aB=A.drop;var L=aB.get(p);var aH=L.get(c);var aD=aE.get(p).get(c);var aA=aH.getData(B);aI._resetState(aI.nodeContent);if(!aD.contains(aH)){var aJ=L.get(D)/3;var az=L.getY();var aG=az+aJ;var aF=az+aJ*2;var aC=aE.mouseXY[1];if((aC>az)&&(aC<aG)){aI._goingUpState(L);}else{if(aC>aF){aI._goingDownState(L);}else{if((aC>aG)&&(aC<aF)){if(aA&&!aA.isLeaf()){aI._appendState(L);}else{if(aI.direction===al){aI._goingUpState(L);}else{aI._goingDownState(L);}}}}}}aI.nodeContent=L;},_afterDropHit:function(aB){var A=this;var aD=A.dropAction;var aC=aB.drag.get(p).get(c);var az=aB.drop.get(p).get(c);var aE=az.getData(B);var aA=aC.getData(B);var L=A.getEventOutputMap(A);L.tree.dropNode=aE;L.tree.dragNode=aA;if(aD===ac){aE.insertBefore(aA);A.bubbleEvent("dropInsert",L);}else{if(aD===ae){aE.insertAfter(aA);A.bubbleEvent("dropInsert",L);}else{if(aD===b){if(aE&&!aE.isLeaf()){aE.appendChild(aA);if(!aE.get(h)){aE.expand();}A.bubbleEvent("dropAppend",L);}}}}A._resetState(A.nodeContent);A.bubbleEvent("drop",L);A.dropAction=null;},_onDragAlign:function(az){var A=this;var L=A.lastY;var aA=az.target.lastXY[1];if(aA!==L){A.direction=(aA<L)?al:aj;}A.lastY=aA;},_onDragStart:function(aC){var A=this;var aA=aC.target;
var aE=aA.get(p).get(c);var az=aE.getData(B);var aD=A.get(N);if(aD){aD.unselect();}az.select();var aB=A.get(n);var L=aB.one(R+H);aB.setStyle(t,am).show();L.html(az.get(af));aA.set(ap,aB);},_onDropOver:function(L){var A=this;A._updateNodeState(L);},_onDropHit:function(L){var A=L.drop.get(p).get(c);var az=A.getData(B);if(!ak(az)){L.preventDefault();}},_onDropExit:function(){var A=this;A.dropAction=null;A._resetState(A.nodeContent);}}});ab.TreeViewDD=g;},"@VERSION@",{skinnable:true,requires:["aui-tree-node","aui-tree-paginator","aui-tree-io","dd-delegate","dd-proxy"]});AUI.add("aui-tree-io",function(e){var l=e.Lang,d=l.isFunction,b=l.isString,a="ioRequestSuccess",n="contentBox",f="io",i="ownerTree",j="loaded",m="loading",c="node",o="tree",h=e.getClassName,g=h(o,c,f,m);function k(q){var p=this;p.publish(a,{defaultFn:p._onIOSuccessDefault});}k.ATTRS={io:{lazyAdd:false,value:null,setter:function(p){return this._setIO(p);}}};k.prototype={initializer:function(){var p=this;p.publish();},initIO:function(){var q=this;var r=q.get(f);if(d(r.cfg.data)){r.cfg.data=r.cfg.data.call(q,q);}q._syncPaginatorIOData(r);if(d(r.loader)){var p=e.bind(r.loader,q);p(r.url,r.cfg,q);}else{e.io.request(r.url,r.cfg);}},ioStartHandler:function(){var p=this;var q=p.get(n);p.set(m,true);q.addClass(g);},ioCompleteHandler:function(){var p=this;var q=p.get(n);p.set(m,false);p.set(j,true);q.removeClass(g);},ioSuccessHandler:function(){var p=this;var w=p.get(f);var r=Array.prototype.slice.call(arguments);var t=r.length;var q=r[1];if(t>=3){var v=r[2];try{q=e.JSON.parse(v.responseText);}catch(u){}}var s=w.formatter;if(s){q=s(q);}p.createNodes(q);p.fire(a,q);},ioFailureHandler:function(){var p=this;p.fire("ioRequestFailure");p.set(m,false);p.set(j,false);},_onIOSuccessDefault:function(r){var p=this;var q=p.get(i);if(q&&q.ddDelegate){q.ddDelegate.syncTargets();}},_setIO:function(r){var p=this;if(!r){return null;}else{if(b(r)){r={url:r};}}r=r||{};r.cfg=r.cfg||{};r.cfg.on=r.cfg.on||{};var q={start:e.bind(p.ioStartHandler,p),complete:e.bind(p.ioCompleteHandler,p),success:e.bind(p.ioSuccessHandler,p),failure:e.bind(p.ioFailureHandler,p)};e.each(q,function(u,s){var v=r.cfg.on[s];u.defaultFn=true;if(d(v)){var t=e.bind(function(){u.apply(p,arguments);v.apply(p,arguments);},p);t.wrappedFn=true;r.cfg.on[s]=t;}else{r.cfg.on[s]=u;}});return r;}};e.TreeViewIO=k;},"@VERSION@",{requires:["aui-io","json"],skinnable:false});AUI.add("aui-tree",function(a){},"@VERSION@",{skinnable:true,use:["aui-tree-data","aui-tree-node","aui-tree-io","aui-tree-paginator","aui-tree-view"]});